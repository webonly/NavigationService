/*!
 * NavigationService v1.1.1 
 * Copyright 2016-2018 HIT ROBOT GROUP 
 * Date: 2017-1-24 14:01:30  WZB
 * 
 */
this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype;e.type=null,e.target=null,e.currentTarget=null,e.eventPhase=0,e.bubbles=!1,e.cancelable=!1,e.timeStamp=0,e.defaultPrevented=!1,e.propagationStopped=!1,e.immediatePropagationStopped=!1,e.removed=!1,e.initialize=function(t,e,i){this.type=t,this.bubbles=e,this.cancelable=i,this.timeStamp=(new Date).getTime()},e.preventDefault=function(){this.defaultPrevented=!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){},e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e._listeners=null,e._captureListeners=null,e.initialize=function(){},e.addEventListener=function(t,e,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var n=s[t];return n&&this.removeEventListener(t,e,i),n=s[t],n?n.push(e):s[t]=[e],e},e.on=function(t,e,i,s,n,r){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,n),s&&t.remove()},r)},e.removeEventListener=function(t,e,i){var s=i?this._captureListeners:this._listeners;if(s){var n=s[t];if(n)for(var r=0,a=n.length;a>r;r++)if(n[r]==e){1==a?delete s[t]:n.splice(r,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e){if("string"==typeof t){var i=this._listeners;if(!i||!i[t])return!1;t=new createjs.Event(t)}if(t.target=e||this,t.bubbles&&this.parent){for(var s=this,n=[s];s.parent;)n.push(s=s.parent);var r,a=n.length;for(r=a-1;r>=0&&!t.propagationStopped;r--)n[r]._dispatchEvent(t,1+(0==r));for(r=1;a>r&&!t.propagationStopped;r++)n[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,s=1==e?this._captureListeners:this._listeners;if(t&&s){var n=s[t.type];if(!n||!(i=n.length))return;t.currentTarget=this,t.eventPhase=e,t.removed=!1,n=n.slice();for(var r=0;i>r&&!t.immediatePropagationStopped;r++){var a=n[r];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";createjs.indexOf=function(t,e){for(var i=0,s=t.length;s>i;i++)if(e===t[i])return i;return-1}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"UID cannot be instantiated"};t._nextID=0,t.get=function(){return t._nextID++},createjs.UID=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"Ticker cannot be instantiated."};t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._paused=!1,t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.setInterval(t._interval))},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick")},t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval},t.getMeasuredTickTime=function(e){var i=0,s=t._tickTimes;if(s.length<1)return-1;e=Math.min(s.length,e||0|t.getFPS());for(var n=0;e>n;n++)i+=s[n];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t._paused=e},t.getPaused=function(){return t._paused},t.getTime=function(e){return t._getTime()-t._startTime-(e?t._pausedTime:0)},t.getEventTime=function(e){return(t._lastTime||t._startTime)-(e?t._pausedTime:0)},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){var e=t._getTime()-t._startTime;t._timerId=null,t._setupTick(),e-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t._getTime()-t._startTime,i=e-t._lastTime,s=t._paused;if(t._ticks++,s&&(t._pausedTicks++,t._pausedTime+=i),t._lastTime=e,t.hasEventListener("tick")){var n=new createjs.Event("tick"),r=t.maxDelta;n.delta=r&&i>r?r:i,n.paused=s,n.time=e,n.runTime=e-t._pausedTime,t.dispatchEvent(n)}for(t._tickTimes.unshift(t._getTime()-e);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(e);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return e&&e.call(performance)||(new Date).getTime()},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,s,n,r,a,o,h,c){this.initialize(t,e,i,s,n,r,a,o,h,c)},e=t.prototype=new createjs.Event;e.stageX=0,e.stageY=0,e.rawX=0,e.rawY=0,e.nativeEvent=null,e.pointerID=0,e.primary=!1,e.addEventListener=null,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,createjs.EventDispatcher.initialize(e),e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY}})}catch(t){}e.Event_initialize=e.initialize,e.initialize=function(t,e,i,s,n,r,a,o,h,c){this.Event_initialize(t,e,i),this.stageX=s,this.stageY=n,this.nativeEvent=r,this.pointerID=a,this.primary=o,this.rawX=null==h?s:h,this.rawY=null==c?n:c},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,s,n,r){this.initialize(t,e,i,s,n,r)},e=t.prototype;t.identity=null,t.DEG_TO_RAD=Math.PI/180,e.a=1,e.b=0,e.c=0,e.d=1,e.tx=0,e.ty=0,e.alpha=1,e.shadow=null,e.compositeOperation=null,e.initialize=function(t,e,i,s,n,r){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==s?1:s,this.tx=n||0,this.ty=r||0,this},e.prepend=function(t,e,i,s,n,r){var a=this.tx;if(1!=t||0!=e||0!=i||1!=s){var o=this.a,h=this.c;this.a=o*t+this.b*i,this.b=o*e+this.b*s,this.c=h*t+this.d*i,this.d=h*e+this.d*s}return this.tx=a*t+this.ty*i+n,this.ty=a*e+this.ty*s+r,this},e.append=function(t,e,i,s,n,r){var a=this.a,o=this.b,h=this.c,c=this.d;return this.a=t*a+e*h,this.b=t*o+e*c,this.c=i*a+s*h,this.d=i*o+s*c,this.tx=n*a+r*h+this.tx,this.ty=n*o+r*c+this.ty,this},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty),this.prependProperties(t.alpha,t.shadow,t.compositeOperation),this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty),this.appendProperties(t.alpha,t.shadow,t.compositeOperation),this},e.prependTransform=function(e,i,s,n,r,a,o,h,c){if(r%360)var l=r*t.DEG_TO_RAD,u=Math.cos(l),p=Math.sin(l);else u=1,p=0;return(h||c)&&(this.tx-=h,this.ty-=c),a||o?(a*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.prepend(u*s,p*s,-p*n,u*n,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,i)):this.prepend(u*s,p*s,-p*n,u*n,e,i),this},e.appendTransform=function(e,i,s,n,r,a,o,h,c){if(r%360)var l=r*t.DEG_TO_RAD,u=Math.cos(l),p=Math.sin(l);else u=1,p=0;return a||o?(a*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,i),this.append(u*s,p*s,-p*n,u*n,0,0)):this.append(u*s,p*s,-p*n,u*n,e,i),(h||c)&&(this.tx-=h*this.a+c*this.c,this.ty-=h*this.b+c*this.d),this},e.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,r=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this},e.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},e.translate=function(t,e){return this.tx+=t,this.ty+=e,this},e.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},e.invert=function(){var t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,r=t*s-e*i;return this.a=s/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-s*n)/r,this.ty=-(t*this.ty-e*n)/r,this},e.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},e.transformPoint=function(t,e,i){return i=i||{},i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),s=Math.atan2(this.b,this.a);return i==s?(e.rotation=s/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=s/t.DEG_TO_RAD),e},e.reinitialize=function(t,e,i,s,n,r,a,o,h){return this.initialize(t,e,i,s,n,r),this.alpha=null==a?1:a,this.shadow=o,this.compositeOperation=h,this},e.copy=function(t){return this.reinitialize(t.a,t.b,t.c,t.d,t.tx,t.ty,t.alpha,t.shadow,t.compositeOperation)},e.appendProperties=function(t,e,i){return this.alpha*=t,this.shadow=e||this.shadow,this.compositeOperation=i||this.compositeOperation,this},e.prependProperties=function(t,e,i){return this.alpha*=t,this.shadow=this.shadow||e,this.compositeOperation=this.compositeOperation||i,this},e.clone=function(){return(new t).copy(this)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t,createjs.Matrix2D=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.initialize(t,e)},e=t.prototype;e.x=0,e.y=0,e.initialize=function(t,e){return this.x=null==t?0:t,this.y=null==e?0:e,this},e.copy=function(t){return this.initialize(t.x,t.y)},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,s){this.initialize(t,e,i,s)},e=t.prototype;e.x=0,e.y=0,e.width=0,e.height=0,e.initialize=function(t,e,i,s){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0,this},e.copy=function(t){return this.initialize(t.x,t.y,t.width,t.height)},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,s,n,r,a){this.initialize(t,e,i,s,n,r,a)},e=t.prototype;e.target=null,e.overLabel=null,e.outLabel=null,e.downLabel=null,e.play=!1,e._isPressed=!1,e._isOver=!1,e.initialize=function(t,e,i,s,n,r,a){t.addEventListener&&(this.target=t,t.cursor="pointer",this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==s?"down":s,this.play=n,this.setEnabled(!0),this.handleEvent({}),r&&(a&&(r.actionsEnabled=!1,r.gotoAndStop&&r.gotoAndStop(a)),t.hitArea=r))},e.setEnabled=function(t){var e=this.target;t?(e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this)):(e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this))},e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e,i=this.target,s=t.type;"mousedown"==s?(this._isPressed=!0,e=this.downLabel):"pressup"==s?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==s?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},createjs.ButtonHelper=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,s){this.initialize(t,e,i,s)},e=t.prototype;t.identity=null,e.color=null,e.offsetX=0,e.offsetY=0,e.blur=0,e.initialize=function(t,e,i,s){this.color=t,this.offsetX=e,this.offsetY=i,this.blur=s},e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},t.identity=new t("transparent",0,0,0),createjs.Shadow=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.EventDispatcher;e.complete=!0,e.framerate=0,e._animations=null,e._frames=null,e._images=null,e._data=null,e._loadCount=0,e._frameHeight=0,e._frameWidth=0,e._numFrames=0,e._regX=0,e._regY=0,e.initialize=function(t){var e,i,s,n;if(null!=t){if(this.framerate=t.framerate||0,t.images&&(i=t.images.length)>0)for(n=this._images=[],e=0;i>e;e++){var r=t.images[e];if("string"==typeof r){var a=r;r=document.createElement("img"),r.src=a}n.push(r),r.getContext||r.complete||(this._loadCount++,this.complete=!1,function(t){r.onload=function(){t._handleImageLoad()}}(this))}if(null==t.frames);else if(t.frames instanceof Array)for(this._frames=[],n=t.frames,e=0,i=n.length;i>e;e++){var o=n[e];this._frames.push({image:this._images[o[4]?o[4]:0],rect:new createjs.Rectangle(o[0],o[1],o[2],o[3]),regX:o[5]||0,regY:o[6]||0})}else s=t.frames,this._frameWidth=s.width,this._frameHeight=s.height,this._regX=s.regX||0,this._regY=s.regY||0,this._numFrames=s.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(s=t.animations)){this._data={};var h;for(h in s){var c={name:h},l=s[h];if("number"==typeof l)n=c.frames=[l];else if(l instanceof Array)if(1==l.length)c.frames=[l[0]];else for(c.speed=l[3],c.next=l[2],n=c.frames=[],e=l[0];e<=l[1];e++)n.push(e);else{c.speed=l.speed,c.next=l.next;var u=l.frames;n=c.frames="number"==typeof u?[u]:u.slice(0)}(c.next===!0||void 0===c.next)&&(c.next=h),(c.next===!1||n.length<2&&c.next==h)&&(c.next=null),c.speed||(c.speed=1),this._animations.push(h),this._data[h]=c}}}},e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames;var e=this._data[t];return null==e?0:e.frames.length},e.getAnimations=function(){return this._animations.slice(0)},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){var i=this.getFrame(t);return i?(e||new createjs.Rectangle).initialize(-i.regX,-i.regY,i.rect.width,i.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){var e=new t;return e.complete=this.complete,e._animations=this._animations,e._frames=this._frames,e._images=this._images,e._data=this._data,e._frameHeight=this._frameHeight,e._frameWidth=this._frameWidth,e._numFrames=this._numFrames,e._loadCount=this._loadCount,e},e._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var t=0,e=this._frameWidth,i=this._frameHeight,s=0,n=this._images;s<n.length;s++){for(var r=n[s],a=r.width/e|0,o=r.height/i|0,h=this._numFrames>0?Math.min(this._numFrames-t,a*o):a*o,c=0;h>c;c++)this._frames.push({image:r,rect:new createjs.Rectangle(c%a*e,(c/a|0)*i,e,i),regX:this._regX,regY:this._regY});t+=h}this._numFrames=t}},createjs.SpriteSheet=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.f=t,this.params=e,this.path=null==i||i}t.prototype.exec=function(t){this.f.apply(t,this.params)};var e=function(){this.initialize()},i=e.prototype;e.getRGB=function(t,e,i,s){return null!=t&&null==i&&(s=e,i=255&t,e=t>>8&255,t=t>>16&255),null==s?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+s+")"},e.getHSL=function(t,e,i,s){return null==s?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+s+")"},e.Command=t,e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var s=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");if(s.getContext){var n=e._ctx=s.getContext("2d");e.beginCmd=new t(n.beginPath,[],(!1)),e.fillCmd=new t(n.fill,[],(!1)),e.strokeCmd=new t(n.stroke,[],(!1)),s.width=s.height=1}i._strokeInstructions=null,i._strokeStyleInstructions=null,i._strokeIgnoreScale=!1,i._fillInstructions=null,i._fillMatrix=null,i._instructions=null,i._oldInstructions=null,i._activeInstructions=null,i._active=!1,i._dirty=!1,i.initialize=function(){this.clear(),this._ctx=e._ctx},i.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},i.draw=function(t){this._dirty&&this._updateInstructions();for(var e=this._instructions,i=0,s=e.length;s>i;i++)e[i].exec(t)},i.drawAsPath=function(t){this._dirty&&this._updateInstructions();for(var e,i=this._instructions,s=0,n=i.length;n>s;s++)((e=i[s]).path||0==s)&&e.exec(t)},i.moveTo=function(e,i){return this._activeInstructions.push(new t(this._ctx.moveTo,[e,i])),this},i.lineTo=function(e,i){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.lineTo,[e,i])),this},i.arcTo=function(e,i,s,n,r){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.arcTo,[e,i,s,n,r])),this},i.arc=function(e,i,s,n,r,a){return this._dirty=this._active=!0,null==a&&(a=!1),this._activeInstructions.push(new t(this._ctx.arc,[e,i,s,n,r,a])),this},i.quadraticCurveTo=function(e,i,s,n){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.quadraticCurveTo,[e,i,s,n])),this},i.bezierCurveTo=function(e,i,s,n,r,a){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.bezierCurveTo,[e,i,s,n,r,a])),this},i.rect=function(e,i,s,n){return this._dirty=this._active=!0,this._activeInstructions.push(new t(this._ctx.rect,[e,i,s,n])),this},i.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new t(this._ctx.closePath,[]))),this},i.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=this._fillMatrix=null,this._active=this._dirty=this._strokeIgnoreScale=!1,this},i.beginFill=function(e){return this._active&&this._newPath(),this._fillInstructions=e?[new t(this._setProp,["fillStyle",e],(!1))]:null,this._fillMatrix=null,this},i.beginLinearGradientFill=function(e,i,s,n,r,a){this._active&&this._newPath();for(var o=this._ctx.createLinearGradient(s,n,r,a),h=0,c=e.length;c>h;h++)o.addColorStop(i[h],e[h]);return this._fillInstructions=[new t(this._setProp,["fillStyle",o],(!1))],this._fillMatrix=null,this},i.beginRadialGradientFill=function(e,i,s,n,r,a,o,h){this._active&&this._newPath();for(var c=this._ctx.createRadialGradient(s,n,r,a,o,h),l=0,u=e.length;u>l;l++)c.addColorStop(i[l],e[l]);return this._fillInstructions=[new t(this._setProp,["fillStyle",c],(!1))],this._fillMatrix=null,this},i.beginBitmapFill=function(e,i,s){this._active&&this._newPath(),i=i||"";var n=this._ctx.createPattern(e,i);return this._fillInstructions=[new t(this._setProp,["fillStyle",n],(!1))],this._fillMatrix=s?[s.a,s.b,s.c,s.d,s.tx,s.ty]:null,this},i.endFill=function(){return this.beginFill()},i.setStrokeStyle=function(i,s,n,r,a){return this._active&&this._newPath(),this._strokeStyleInstructions=[new t(this._setProp,["lineWidth",null==i?"1":i],(!1)),new t(this._setProp,["lineCap",null==s?"butt":isNaN(s)?s:e.STROKE_CAPS_MAP[s]],(!1)),new t(this._setProp,["lineJoin",null==n?"miter":isNaN(n)?n:e.STROKE_JOINTS_MAP[n]],(!1)),new t(this._setProp,["miterLimit",null==r?"10":r],(!1))],this._strokeIgnoreScale=a,this},i.beginStroke=function(e){return this._active&&this._newPath(),this._strokeInstructions=e?[new t(this._setProp,["strokeStyle",e],(!1))]:null,this},i.beginLinearGradientStroke=function(e,i,s,n,r,a){this._active&&this._newPath();for(var o=this._ctx.createLinearGradient(s,n,r,a),h=0,c=e.length;c>h;h++)o.addColorStop(i[h],e[h]);return this._strokeInstructions=[new t(this._setProp,["strokeStyle",o],(!1))],this},i.beginRadialGradientStroke=function(e,i,s,n,r,a,o,h){this._active&&this._newPath();for(var c=this._ctx.createRadialGradient(s,n,r,a,o,h),l=0,u=e.length;u>l;l++)c.addColorStop(i[l],e[l]);return this._strokeInstructions=[new t(this._setProp,["strokeStyle",c],(!1))],this},i.beginBitmapStroke=function(e,i){this._active&&this._newPath(),i=i||"";var s=this._ctx.createPattern(e,i);return this._strokeInstructions=[new t(this._setProp,["strokeStyle",s],(!1))],this},i.endStroke=function(){return this.beginStroke(),this},i.curveTo=i.quadraticCurveTo,i.drawRect=i.rect,i.drawRoundRect=function(t,e,i,s,n){return this.drawRoundRectComplex(t,e,i,s,n,n,n,n),this},i.drawRoundRectComplex=function(e,i,s,n,r,a,o,h){var c=(n>s?s:n)/2,l=0,u=0,p=0,d=0;0>r&&(r*=l=-1),r>c&&(r=c),0>a&&(a*=u=-1),a>c&&(a=c),0>o&&(o*=p=-1),o>c&&(o=c),0>h&&(h*=d=-1),h>c&&(h=c),this._dirty=this._active=!0;var f=this._ctx.arcTo,m=this._ctx.lineTo;return this._activeInstructions.push(new t(this._ctx.moveTo,[e+s-a,i]),new t(f,[e+s+a*u,i-a*u,e+s,i+a,a]),new t(m,[e+s,i+n-o]),new t(f,[e+s+o*p,i+n+o*p,e+s-o,i+n,o]),new t(m,[e+h,i+n]),new t(f,[e-h*d,i+n+h*d,e,i+n-h,h]),new t(m,[e,i+r]),new t(f,[e-r*l,i-r*l,e+r,i,r]),new t(this._ctx.closePath)),this},i.drawCircle=function(t,e,i){return this.arc(t,e,i,0,2*Math.PI),this},i.drawEllipse=function(e,i,s,n){this._dirty=this._active=!0;var r=.5522848,a=s/2*r,o=n/2*r,h=e+s,c=i+n,l=e+s/2,u=i+n/2;return this._activeInstructions.push(new t(this._ctx.moveTo,[e,u]),new t(this._ctx.bezierCurveTo,[e,u-o,l-a,i,l,i]),new t(this._ctx.bezierCurveTo,[l+a,i,h,u-o,h,u]),new t(this._ctx.bezierCurveTo,[h,u+o,l+a,c,l,c]),new t(this._ctx.bezierCurveTo,[l-a,c,e,u+o,e,u])),this},i.inject=function(e,i){return this._dirty=this._active=!0,this._activeInstructions.push(new t(e,[i])),this},i.drawPolyStar=function(e,i,s,n,r,a){this._dirty=this._active=!0,null==r&&(r=0),r=1-r,null==a?a=0:a/=180/Math.PI;var o=Math.PI/n;this._activeInstructions.push(new t(this._ctx.moveTo,[e+Math.cos(a)*s,i+Math.sin(a)*s]));for(var h=0;n>h;h++)a+=o,1!=r&&this._activeInstructions.push(new t(this._ctx.lineTo,[e+Math.cos(a)*s*r,i+Math.sin(a)*s*r])),a+=o,this._activeInstructions.push(new t(this._ctx.lineTo,[e+Math.cos(a)*s,i+Math.sin(a)*s]));return this},i.decodePath=function(t){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],s=[2,2,4,6,0],n=0,r=t.length,a=[],o=0,h=0,c=e.BASE_64;r>n;){var l=t.charAt(n),u=c[l],p=u>>3,d=i[p];if(!d||3&u)throw"bad path data (@"+n+"): "+l;var f=s[p];p||(o=h=0),a.length=0,n++;for(var m=(u>>2&1)+2,v=0;f>v;v++){var g=c[t.charAt(n)],_=g>>5?-1:1;g=(31&g)<<6|c[t.charAt(n+1)],3==m&&(g=g<<6|c[t.charAt(n+2)]),g=_*g/10,v%2?o=g+=o:h=g+=h,a[v]=g,n+=m}d.apply(this,a)}return this},i.clone=function(){var t=new e;return t._instructions=this._instructions.slice(),t._activeInstructions=this._activeInstructions.slice(),t._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(t._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(t._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(t._strokeStyleInstructions=this._strokeStyleInstructions.slice()),t._active=this._active,t._dirty=this._dirty,t._fillMatrix=this._fillMatrix,t._strokeIgnoreScale=this._strokeIgnoreScale,t},i.toString=function(){return"[Graphics]"},i.mt=i.moveTo,i.lt=i.lineTo,i.at=i.arcTo,i.bt=i.bezierCurveTo,i.qt=i.quadraticCurveTo,i.a=i.arc,i.r=i.rect,i.cp=i.closePath,i.c=i.clear,i.f=i.beginFill,i.lf=i.beginLinearGradientFill,i.rf=i.beginRadialGradientFill,i.bf=i.beginBitmapFill,i.ef=i.endFill,i.ss=i.setStrokeStyle,i.s=i.beginStroke,i.ls=i.beginLinearGradientStroke,i.rs=i.beginRadialGradientStroke,i.bs=i.beginBitmapStroke,i.es=i.endStroke,i.dr=i.drawRect,i.rr=i.drawRoundRect,i.rc=i.drawRoundRectComplex,i.dc=i.drawCircle,i.de=i.drawEllipse,i.dp=i.drawPolyStar,i.p=i.decodePath,i._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(e.beginCmd),this._appendInstructions(this._fillInstructions),this._appendInstructions(this._strokeInstructions),this._appendInstructions(this._strokeInstructions&&this._strokeStyleInstructions),this._appendInstructions(this._activeInstructions),this._fillInstructions&&this._appendDraw(e.fillCmd,this._fillMatrix),this._strokeInstructions&&this._appendDraw(e.strokeCmd,this._strokeIgnoreScale&&[1,0,0,1,0,0])},i._appendInstructions=function(t){t&&this._instructions.push.apply(this._instructions,t)},i._appendDraw=function(e,i){i?this._instructions.push(new t(this._ctx.save,[],(!1)),new t(this._ctx.transform,i,(!1)),e,new t(this._ctx.restore,[],(!1))):this._instructions.push(e)},i._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},i._setProp=function(t,e){this[t]=e},createjs.Graphics=e}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype=new createjs.EventDispatcher;t._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],t.suppressCrossDomainErrors=!1;var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._hitTestCanvas=i,t._hitTestContext=i.getContext("2d"),i.width=i.height=1),t._nextCacheID=1,e.alpha=1,e.cacheCanvas=null,e.id=-1,e.mouseEnabled=!0,e.tickEnabled=!0,e.name=null,e.parent=null,e.regX=0,e.regY=0,e.rotation=0,e.scaleX=1,e.scaleY=1,e.skewX=0,e.skewY=0,e.shadow=null,e.visible=!0,e.x=0,e.y=0,e.compositeOperation=null,e.snapToPixel=!1,e.filters=null,e.cacheID=0,e.mask=null,e.hitArea=null,e.cursor=null,e._cacheOffsetX=0,e._cacheOffsetY=0,e._cacheScale=1,e._cacheDataURLID=0,e._cacheDataURL=null,e._matrix=null,e._rectangle=null,e._bounds=null,e.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D,this._rectangle=new createjs.Rectangle},e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(t,e){var i=this.cacheCanvas;if(e||!i)return!1;var s,n=this._cacheScale,r=this._cacheOffsetX,a=this._cacheOffsetY;return(s=this._applyFilterBounds(r,a,0,0))&&(r=s.x,a=s.y),t.drawImage(i,r,a,i.width/n,i.height/n),!0},e.updateContext=function(t){var e,i=this.mask,s=this;i&&i.graphics&&!i.graphics.isEmpty()&&(e=i.getMatrix(i._matrix),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),i.graphics.drawAsPath(t),t.clip(),e.invert(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),e=s._matrix.identity().appendTransform(s.x,s.y,s.scaleX,s.scaleY,s.rotation,s.skewX,s.skewY,s.regX,s.regY),createjs.Stage._snapToPixelEnabled&&s.snapToPixel?t.transform(e.a,e.b,e.c,e.d,e.tx+.5|0,e.ty+.5|0):t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty),t.globalAlpha*=s.alpha,s.compositeOperation&&(t.globalCompositeOperation=s.compositeOperation),s.shadow&&this._applyShadow(t,s.shadow)},e.cache=function(t,e,i,s,n){n=n||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=i,this._cacheHeight=s,this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=n,this.updateCache()},e.updateCache=function(e){var i,s=this.cacheCanvas,n=this._cacheScale,r=this._cacheOffsetX*n,a=this._cacheOffsetY*n,o=this._cacheWidth,h=this._cacheHeight;if(!s)throw"cache() must be called before updateCache()";var c=s.getContext("2d");(i=this._applyFilterBounds(r,a,o,h))&&(r=i.x,a=i.y,o=i.width,h=i.height),o=Math.ceil(o*n),h=Math.ceil(h*n),o!=s.width||h!=s.height?(s.width=o,s.height=h):e||c.clearRect(0,0,o+1,h+1),c.save(),c.globalCompositeOperation=e,c.setTransform(n,0,0,n,-r,-a),this.draw(c,!0),this._applyFilters(),c.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.getStage=function(){for(var t=this;t.parent;)t=t.parent;return t instanceof createjs.Stage?t:null},e.localToGlobal=function(t,e){var i=this.getConcatenatedMatrix(this._matrix);return null==i?null:(i.append(1,0,0,1,t,e),new createjs.Point(i.tx,i.ty))},e.globalToLocal=function(t,e){var i=this.getConcatenatedMatrix(this._matrix);return null==i?null:(i.invert(),i.append(1,0,0,1,t,e),new createjs.Point(i.tx,i.ty))},e.localToLocal=function(t,e,i){var s=this.localToGlobal(t,e);return i.globalToLocal(s.x,s.y)},e.setTransform=function(t,e,i,s,n,r,a,o,h){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==s?1:s,this.rotation=n||0,this.skewX=r||0,this.skewY=a||0,this.regX=o||0,this.regY=h||0,this},e.getMatrix=function(t){var e=this;return(t?t.identity():new createjs.Matrix2D).appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY).appendProperties(e.alpha,e.shadow,e.compositeOperation)},e.getConcatenatedMatrix=function(t){t?t.identity():t=new createjs.Matrix2D;for(var e=this;null!=e;)t.prependTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY).prependProperties(e.alpha,e.shadow,e.compositeOperation),e=e.parent;return t},e.hitTest=function(e,i){var s=t._hitTestContext;
s.setTransform(1,0,0,1,-e,-i),this.draw(s);var n=this._testHit(s);return s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),n},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.initialize(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(t,e,i,s){null==t&&(this._bounds=t),this._bounds=(this._bounds||new createjs.Rectangle).initialize(t,e,i,s)},e.clone=function(){var e=new t;return this.cloneProps(e),e},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e.cloneProps=function(t){t.alpha=this.alpha,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t._bounds=this._bounds,t.mouseEnabled=this.mouseEnabled,t.compositeOperation=this.compositeOperation},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){var e=this._listeners;if(e&&e.tick){var i=new createjs.Event("tick");i.params=t,this._dispatchEvent(i,this,2)}},e._testHit=function(e){try{var i=e.getImageData(0,0,1,1).data[3]>1}catch(e){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,s=this.cacheCanvas.height,n=0;t>n;n++)this.filters[n].applyFilter(e,0,0,i,s)},e._applyFilterBounds=function(t,e,i,s){var n,r,a=this.filters;if(!a||!(r=a.length))return null;for(var o=0;r>o;o++){var h=this.filters[o],c=h.getBounds&&h.getBounds();c&&(n||(n=this._rectangle.initialize(t,e,i,s)),n.x+=c.x,n.y+=c.y,n.width+=c.width,n.height+=c.height)}return n},e._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e._transformBounds=function(t,e,i){if(!t)return t;var s=t.x,n=t.y,r=t.width,a=t.height,o=i?this._matrix.identity():this.getMatrix(this._matrix);(s||n)&&o.appendTransform(0,0,1,1,0,0,0,-s,-n),e&&o.prependMatrix(e);var h=r*o.a,c=r*o.b,l=a*o.c,u=a*o.d,p=o.tx,d=o.ty,f=p,m=p,v=d,g=d;return(s=h+p)<f?f=s:s>m&&(m=s),(s=h+l+p)<f?f=s:s>m&&(m=s),(s=l+p)<f?f=s:s>m&&(m=s),(n=c+d)<v?v=n:n>g&&(g=n),(n=c+u+d)<v?v=n:n>g&&(g=n),(n=u+d)<v?v=n:n>g&&(g=n),t.initialize(f,v,m-f,g-v)},e._hasMouseEventListener=function(){for(var e=t._MOUSE_EVENTS,i=0,s=e.length;s>i;i++)if(this.hasEventListener(e[i]))return!0;return!!this.cursor},createjs.DisplayObject=t}(),this.createjs=this.createjs||{},function(){var t=function(){this.initialize()},e=t.prototype=new createjs.DisplayObject;e.children=null,e.mouseChildren=!0,e.tickChildren=!0,e.DisplayObject_initialize=e.initialize,e.initialize=function(){this.DisplayObject_initialize(),this.children=[]},e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(0),s=0,n=i.length;n>s;s++){var r=i[s];r.isVisible()&&(t.save(),r.updateContext(t),r.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addChild(arguments[i]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t},e.addChildAt=function(t,e){var i=arguments.length,s=arguments[i-1];if(0>s||s>this.children.length)return arguments[i-2];if(i>2){for(var n=0;i-1>n;n++)this.addChildAt(arguments[n],s+n);return arguments[i-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t},e.removeChild=function(t){var e=arguments.length;if(e>1){for(var i=!0,s=0;e>s;s++)i=i&&this.removeChild(arguments[s]);return i}return this.removeChildAt(createjs.indexOf(this.children,t))},e.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],s=0;e>s;s++)i[s]=arguments[s];i.sort(function(t,e){return e-t});for(var n=!0,s=0;e>s;s++)n=n&&this.removeChildAt(i[s]);return n}if(0>t||t>this.children.length-1)return!1;var r=this.children[t];return r&&(r.parent=null),this.children.splice(t,1),!0},e.removeAllChildren=function(){for(var t=this.children;t.length;)t.pop().parent=null},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,i=0,s=e.length;s>i;i++)if(e[i].name==t)return e[i];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return createjs.indexOf(this.children,t)},e.getNumChildren=function(){return this.children.length},e.swapChildrenAt=function(t,e){var i=this.children,s=i[t],n=i[e];s&&n&&(i[t]=n,i[e]=s)},e.swapChildren=function(t,e){for(var i,s,n=this.children,r=0,a=n.length;a>r&&(n[r]==t&&(i=r),n[r]==e&&(s=r),null==i||null==s);r++);r!=a&&(n[i]=e,n[s]=t)},e.setChildIndex=function(t,e){var i=this.children,s=i.length;if(!(t.parent!=this||0>e||e>=s)){for(var n=0;s>n&&i[n]!=t;n++);n!=s&&n!=e&&(i.splice(n,1),i.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e){var i=[],s=this.localToGlobal(t,e);return this._getObjectsUnderPoint(s.x,s.y,i),i},e.getObjectUnderPoint=function(t,e){var i=this.localToGlobal(t,e);return this._getObjectsUnderPoint(i.x,i.y)},e.DisplayObject_getBounds=e.getBounds,e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(e){var i=new t;if(this.cloneProps(i),e)for(var s=i.children=[],n=0,r=this.children.length;r>n;n++){var a=this.children[n].clone(e);a.parent=i,s.push(a)}return i},e.toString=function(){return"[Container (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},e._getObjectsUnderPoint=function(e,i,s,n,r){var a=createjs.DisplayObject._hitTestContext,o=this._matrix;r=r||n&&this._hasMouseEventListener();for(var h=this.children,c=h.length,l=c-1;l>=0;l--){var u=h[l],p=u.hitArea;if(u.visible&&(p||u.isVisible())&&(!n||u.mouseEnabled))if(!p&&u instanceof t){var d=u._getObjectsUnderPoint(e,i,s,n,r);if(!s&&d)return n&&!this.mouseChildren?this:d}else{if(!r&&!u._hasMouseEventListener())continue;if(u.getConcatenatedMatrix(o),p&&(o.appendTransform(p.x,p.y,p.scaleX,p.scaleY,p.rotation,p.skewX,p.skewY,p.regX,p.regY),o.alpha=p.alpha),a.globalAlpha=o.alpha,a.setTransform(o.a,o.b,o.c,o.d,o.tx-e,o.ty-i),(p||u).draw(a),!this._testHit(a))continue;if(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,2,2),!s)return n&&!this.mouseChildren?this:u;s.push(u)}}return null},e._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var s,n,r,a,o=e?this._matrix.identity():this.getMatrix(this._matrix);t&&o.prependMatrix(t);for(var h=this.children.length,c=0;h>c;c++){var l=this.children[c];if(l.visible&&(i=l._getBounds(o))){var u=i.x,p=i.y,d=u+i.width,f=p+i.height;(s>u||null==s)&&(s=u),(d>n||null==n)&&(n=d),(r>p||null==r)&&(r=p),(f>a||null==a)&&(a=f)}}return null==n?null:this._rectangle.initialize(s,r,n-s,a-r)},createjs.Container=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.Container;t._snapToPixelEnabled=!1,e.autoClear=!0,e.canvas=null,e.mouseX=0,e.mouseY=0,e.snapToPixelEnabled=!1,e.mouseInBounds=!1,e.tickOnUpdate=!0,e.mouseMoveOutside=!1,e.nextStage=null,e._pointerData=null,e._pointerCount=0,e._primaryPointerID=null,e._mouseOverIntervalID=null,e.Container_initialize=e.initialize,e.initialize=function(t){this.Container_initialize(),this.canvas="string"==typeof t?document.getElementById(t):t,this._pointerData={},this.enableDOMEvents(!0)},e.update=function(){if(this.canvas){this.tickOnUpdate&&(this.dispatchEvent("tickstart"),this.tickEnabled&&this._tick(arguments.length?arguments:null),this.dispatchEvent("tickend")),this.dispatchEvent("drawstart"),t._snapToPixelEnabled=this.snapToPixelEnabled,this.autoClear&&this.clear();var e=this.canvas.getContext("2d");e.save(),this.updateContext(e),this.draw(e,!1),e.restore(),this.dispatchEvent("drawend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,e){e||(e="image/png");var i,s=this.canvas.getContext("2d"),n=this.canvas.width,r=this.canvas.height;if(t){i=s.getImageData(0,0,n,r);var a=s.globalCompositeOperation;s.globalCompositeOperation="destination-over",s.fillStyle=t,s.fillRect(0,0,n,r)}var o=this.canvas.toDataURL(e);return t&&(s.clearRect(0,0,n+1,r+1),s.putImageData(i,0,0),s.globalCompositeOperation=a),o},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(0>=t)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,s=this._eventListeners;if(!t&&s){for(e in s)i=s[e],i.t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!s&&this.canvas){var n=window.addEventListener?window:document,r=this;s=this._eventListeners={},s.mouseup={t:n,f:function(t){r._handleMouseUp(t)}},s.mousemove={t:n,f:function(t){r._handleMouseMove(t)}},s.dblclick={t:this.canvas,f:function(t){r._handleDoubleClick(t)}},s.mousedown={t:this.canvas,f:function(t){r._handleMouseDown(t)}};for(e in s)i=s[e],i.t.addEventListener(e,i.f,!1)}},e.clone=function(){var e=new t(null);return this.cloneProps(e),e},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),s=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),n=window.getComputedStyle?getComputedStyle(t):t.currentStyle,r=parseInt(n.paddingLeft)+parseInt(n.borderLeftWidth),a=parseInt(n.paddingTop)+parseInt(n.borderTopWidth),o=parseInt(n.paddingRight)+parseInt(n.borderRightWidth),h=parseInt(n.paddingBottom)+parseInt(n.borderBottomWidth);return{left:e.left+i+r,right:e.right+i-o,top:e.top+s+a,bottom:e.bottom+s-h}},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0},null==this._primaryPointerID&&(this._primaryPointerID=t),(null==this._primaryPointerID||-1==this._primaryPointerID)&&(this._primaryPointerID=t)),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,i,s){if(this.canvas){var n=this._getPointerData(t),r=n.inBounds;if(this._updatePointerPosition(t,e,i,s),r||n.inBounds||this.mouseMoveOutside){-1==t&&n.inBounds==!r&&this._dispatchMouseEvent(this,r?"mouseleave":"mouseenter",!1,t,n,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,n,e),this._dispatchMouseEvent(n.target,"pressmove",!0,t,n,e);var a=n.event;a&&a.hasEventListener("mousemove")&&a.dispatchEvent(new createjs.MouseEvent("mousemove",(!1),(!1),n.x,n.y,e,t,t==this._primaryPointerID,n.rawX,n.rawY),n.target),this.nextStage&&this.nextStage._handlePointerMove(t,e,i,s)}}},e._updatePointerPosition=function(t,e,i,s){var n=this._getElementRect(this.canvas);i-=n.left,s-=n.top;var r=this.canvas.width,a=this.canvas.height;i/=(n.right-n.left)/r,s/=(n.bottom-n.top)/a;var o=this._getPointerData(t);(o.inBounds=i>=0&&s>=0&&r-1>=i&&a-1>=s)?(o.x=i,o.y=s):this.mouseMoveOutside&&(o.x=0>i?0:i>r-1?r-1:i,o.y=0>s?0:s>a-1?a-1:s),o.posEvtObj=e,o.rawX=i,o.rawY=s,t==this._primaryPointerID&&(this.mouseX=o.x,this.mouseY=o.y,this.mouseInBounds=o.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,i){var s=this._getPointerData(t);this._dispatchMouseEvent(this,"stagemouseup",!1,t,s,e);var n=s.target;n&&(this._getObjectsUnderPoint(s.x,s.y,null,!0)==n&&this._dispatchMouseEvent(n,"click",!0,t,s,e),this._dispatchMouseEvent(n,"pressup",!0,t,s,e));var r=s.event;r&&r.hasEventListener("mouseup")&&r.dispatchEvent(new createjs.MouseEvent("mouseup",(!1),(!1),s.x,s.y,e,t,t==this._primaryPointerID,s.rawX,s.rawY),n),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):s.event=s.target=null,this.nextStage&&this.nextStage._handlePointerUp(t,e,i)},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,i,s){null!=s&&this._updatePointerPosition(t,e,i,s);var n=this._getPointerData(t);this._dispatchMouseEvent(this,"stagemousedown",!1,t,n,e),n.target=this._getObjectsUnderPoint(n.x,n.y,null,!0),n.event=this._dispatchMouseEvent(n.target,"mousedown",!0,t,n,e),this.nextStage&&this.nextStage._handlePointerDown(t,e,i,s)},e._testMouseOver=function(t){if(-1==this._primaryPointerID&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var e,i,s,n,r=this._getPointerData(-1),a=r.posEvtObj,o=-1,h="";(t||this.mouseInBounds&&a&&a.target==this.canvas)&&(e=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var c=this._mouseOverTarget||[],l=c[c.length-1],u=this._mouseOverTarget=[];for(i=e;i;)u.unshift(i),null!=i.cursor&&(h=i.cursor),i=i.parent;for(this.canvas.style.cursor=h,s=0,n=u.length;n>s&&u[s]==c[s];s++)o=s;for(l!=e&&this._dispatchMouseEvent(l,"mouseout",!0,-1,r,a),s=c.length-1;s>o;s--)this._dispatchMouseEvent(c[s],"rollout",!1,-1,r,a);for(s=u.length-1;s>o;s--)this._dispatchMouseEvent(u[s],"rollover",!1,-1,r,a);l!=e&&this._dispatchMouseEvent(e,"mouseover",!0,-1,r,a)}},e._handleDoubleClick=function(t){var e=this._getPointerData(-1),i=this._getObjectsUnderPoint(e.x,e.y,null,!0);this._dispatchMouseEvent(i,"dblclick",!0,-1,e,t),this.nextStage&&this.nextStage._handleDoubleClick(t)},e._dispatchMouseEvent=function(t,e,i,s,n,r){if(t&&(i||t.hasEventListener(e))){var a=new createjs.MouseEvent(e,i,(!1),n.x,n.y,r,s,s==this._primaryPointerID,n.rawX,n.rawY);return t.dispatchEvent(a),a}},createjs.Stage=t}(),this.createjs=this.createjs||{},function(){var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.image=null,e.snapToPixel=!0,e.sourceRect=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){this.DisplayObject_initialize(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t},e.isVisible=function(){var t=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.sourceRect;return i?t.drawImage(this.image,i.x,i.y,i.width,i.height,0,0,i.width,i.height):t.drawImage(this.image,0,0),!0},e.DisplayObject_getBounds=e.getBounds,e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.sourceRect||this.image,i=this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return i?this._rectangle.initialize(0,0,e.width,e.height):null},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this.cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e){this.initialize(t,e)},e=t.prototype=new createjs.DisplayObject;e.currentFrame=0,e.currentAnimation=null,e.paused=!0,e.spriteSheet=null,e.snapToPixel=!0,e.offset=0,e.currentAnimationFrame=0,e.framerate=0,e._advanceCount=0,e._animation=null,e._currentFrame=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t,e){this.DisplayObject_initialize(),this.spriteSheet=t,e&&this.gotoAndPlay(e)},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var s=i.rect;return t.drawImage(i.image,s.x,s.y,s.width,s.height,-i.regX,-i.regY,s.width,s.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this._animation&&this._animation.speed||1,i=this.framerate||this.spriteSheet.framerate,s=i&&null!=t?t/(1e3/i):1;this._animation?this.currentAnimationFrame+=s*e:this._currentFrame+=s*e,this._normalizeFrame()},e.DisplayObject_getBounds=e.getBounds,e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){var e=new t(this.spriteSheet);return this.cloneProps(e),e},e.toString=function(){return"[Sprite (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){this.paused||this.advance(t&&t[0]&&t[0].delta),this.DisplayObject__tick(t)},e._normalizeFrame=function(){var t,e=this._animation,i=this.paused,s=this._currentFrame,n=this.currentAnimationFrame;if(e)if(t=e.frames.length,(0|n)>=t){var r=e.next;if(this._dispatchAnimationEnd(e,s,i,r,t-1));else{if(r)return this._goto(r,n-t);this.paused=!0,n=this.currentAnimationFrame=e.frames.length-1,this._currentFrame=e.frames[n]}}else this._currentFrame=e.frames[0|n];else if(t=this.spriteSheet.getNumFrames(),s>=t&&!this._dispatchAnimationEnd(e,s,i,t-1)&&(this._currentFrame-=t)>=t)return this._normalizeFrame();this.currentFrame=0|this._currentFrame},e._dispatchAnimationEnd=function(t,e,i,s,n){var r=t?t.name:null;if(this.hasEventListener("animationend")){var a=new createjs.Event("animationend");a.name=r,a.next=s,this.dispatchEvent(a)}var o=this._animation!=t||this._currentFrame!=e;return o||i||!this.paused||(this.currentAnimationFrame=n,o=!0),o},e.DisplayObject_cloneProps=e.cloneProps,e.cloneProps=function(t){this.DisplayObject_cloneProps(t),t.currentFrame=this.currentFrame,t._currentFrame=this._currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t._animation=this._animation,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate},e._goto=function(t,e){if(isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this.currentAnimationFrame=e||0,this._animation=i,this.currentAnimation=t,this._normalizeFrame())}else this.currentAnimationFrame=0,this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},createjs.Sprite=t}(),this.createjs=this.createjs||{},function(){"use strict";var t="BitmapAnimation is deprecated in favour of Sprite. See VERSIONS file for info on changes.";if(!createjs.Sprite)throw t;(createjs.BitmapAnimation=function(e){console.log(t),this.initialize(e)}).prototype=new createjs.Sprite}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;e.graphics=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){this.DisplayObject_initialize(),this.graphics=t?t:new createjs.Graphics},e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this.graphics.draw(t),!0)},e.clone=function(e){var i=new t(e&&this.graphics?this.graphics.clone():this.graphics);return this.cloneProps(i),i},e.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype=new createjs.DisplayObject,i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._workingContext=i.getContext("2d"),i.width=i.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.text="",e.font=null,e.color=null,e.textAlign="left",e.textBaseline="top",e.maxWidth=null,e.outline=0,e.lineHeight=0,e.lineWidth=null,e.DisplayObject_initialize=e.initialize,e.initialize=function(t,e,i){this.DisplayObject_initialize(),this.text=t,this.font=e,this.color=i},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.DisplayObject_draw=e.draw,e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this._prepContext(t._workingContext).measureText(this.text).width},e.getMeasuredLineHeight=function(){return 1.2*this._prepContext(t._workingContext).measureText("M").width},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.DisplayObject_getBounds=e.getBounds,e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""==this.text)return null;var i=this._drawText(null,{}),s=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,n=s*t.H_OFFSETS[this.textAlign||"left"],r=this.lineHeight||this.getMeasuredLineHeight(),a=r*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.initialize(n,a,s,i.height)},e.clone=function(){var e=new t(this.text,this.font,this.color);return this.cloneProps(e),e},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e.DisplayObject_cloneProps=e.cloneProps,e.cloneProps=function(t){this.DisplayObject_cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth},e._prepContext=function(t){return t.font=this.font,t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,i){var s=!!e;s||(e=this._prepContext(t._workingContext));for(var n=this.lineHeight||this.getMeasuredLineHeight(),r=0,a=0,o=String(this.text).split(/(?:\r\n|\r|\n)/),h=0,c=o.length;c>h;h++){var l=o[h],u=null;if(null!=this.lineWidth&&(u=e.measureText(l).width)>this.lineWidth){var p=l.split(/(\s)/);l=p[0],u=e.measureText(l).width;for(var d=1,f=p.length;f>d;d+=2){var m=e.measureText(p[d]+p[d+1]).width;u+m>this.lineWidth?(s&&this._drawTextLine(e,l,a*n),u>r&&(r=u),l=p[d+1],u=e.measureText(l).width,a++):(l+=p[d]+p[d+1],u+=m)}}s&&this._drawTextLine(e,l,a*n),i&&null==u&&(u=e.measureText(l).width),u>r&&(r=u),a++}return i&&(i.count=a,i.width=r,i.height=a*n),i},e._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},createjs.Text=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.initialize(t,e)}var e=t.prototype=new createjs.DisplayObject;e.text="",e.spriteSheet=null,e.lineHeight=0,e.letterSpacing=0,e.spaceWidth=0,e.DisplayObject_initialize=e.initialize,e.initialize=function(t,e){this.DisplayObject_initialize(),this.text=t,this.spriteSheet=e},e.DisplayObject_draw=e.draw,e.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||void this._drawText(t)},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.getBounds=function(){var t=this._rectangle;return this._drawText(null,t),t.width?t:null},e._getFrame=function(t,e){var i,s=e.getAnimation(t);return s||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(s=e.getAnimation(i))),s&&e.getFrame(s.frames[0])},e._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e._drawText=function(t,e){var i,s,n,r=0,a=0,o=this.spaceWidth,h=this.lineHeight,c=this.spriteSheet,l=!!this._getFrame(" ",c);l||0!=o||(o=this._getSpaceWidth(c)),0==h&&(h=this._getLineHeight(c));for(var u=0,p=0,d=this.text.length;d>p;p++){var f=this.text.charAt(p);if(l||" "!=f)if("\n"!=f&&"\r"!=f){var m=this._getFrame(f,c);if(m){var v=m.rect;n=m.regX,i=v.width,t&&t.drawImage(m.image,v.x,v.y,i,s=v.height,r-n,a-m.regY,i,s),r+=i+this.letterSpacing}}else"\r"==f&&"\n"==this.text.charAt(p+1)&&p++,r-n>u&&(u=r-n),r=0,a+=h;else r+=o}r-n>u&&(u=r-n),e&&(e.width=u-this.letterSpacing,e.height=a+h)},createjs.BitmapText=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"SpriteSheetUtils cannot be instantiated"},e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(t._workingCanvas=e,t._workingContext=e.getContext("2d"),e.width=e.height=1),t.addFlippedFrames=function(e,i,s,n){if(i||s||n){var r=0;i&&t._flip(e,++r,!0,!1),s&&t._flip(e,++r,!1,!0),n&&t._flip(e,++r,!0,!0)}},t.extractFrame=function(e,i){isNaN(i)&&(i=e.getAnimation(i).frames[0]);var s=e.getFrame(i);if(!s)return null;var n=s.rect,r=t._workingCanvas;r.width=n.width,r.height=n.height,t._workingContext.drawImage(s.image,n.x,n.y,n.width,n.height,0,0,n.width,n.height);var a=document.createElement("img");return a.src=r.toDataURL("image/png"),a},t.mergeAlpha=function(t,e,i){i||(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var s=i.getContext("2d");return s.save(),s.drawImage(t,0,0),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),s.restore(),i},t._flip=function(e,i,s,n){for(var r=e._images,a=t._workingCanvas,o=t._workingContext,h=r.length/i,c=0;h>c;c++){var l=r[c];l.__tmp=c,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a.width+1,a.height+1),a.width=l.width,a.height=l.height,o.setTransform(s?-1:1,0,0,n?-1:1,s?l.width:0,n?l.height:0),o.drawImage(l,0,0);var u=document.createElement("img");u.src=a.toDataURL("image/png"),u.width=l.width,u.height=l.height,r.push(u)}var p=e._frames,d=p.length/i;for(c=0;d>c;c++){l=p[c];var f=l.rect.clone();u=r[l.image.__tmp+h*i];var m={image:u,rect:f,regX:l.regX,regY:l.regY};s&&(f.x=u.width-f.x-f.width,m.regX=f.width-l.regX),n&&(f.y=u.height-f.y-f.height,m.regY=f.height-l.regY),p.push(m)}var v="_"+(s?"h":"")+(n?"v":""),g=e._animations,_=e._data,y=g.length/i;for(c=0;y>c;c++){var w=g[c];l=_[w];var b={name:w+v,speed:l.speed,next:l.next,frames:[]};l.next&&(b.next+=v),p=l.frames;for(var S=0,x=p.length;x>S;S++)b.frames.push(p[S]+d*i);_[b.name]=b,g.push(b.name)}},createjs.SpriteSheetUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.initialize()},e=t.prototype=new createjs.EventDispatcher;t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.maxWidth=2048,e.maxHeight=2048,e.spriteSheet=null,e.scale=1,e.padding=1,e.timeSlice=.3,e.progress=-1,e._frames=null,e._animations=null,e._data=null,e._nextFrameIndex=0,e._index=0,e._timerID=null,e._scale=1,e.initialize=function(){this._frames=[],this._animations={}},e.addFrame=function(e,i,s,n,r,a){if(this._data)throw t.ERR_RUNNING;var o=i||e.bounds||e.nominalBounds;return!o&&e.getBounds&&(o=e.getBounds()),o?(s=s||1,this._frames.push({source:e,sourceRect:o,scale:s,funct:n,params:r,scope:a,index:this._frames.length,height:o.height*s})-1):null},e.addAnimation=function(e,i,s,n){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:i,next:s,frequency:n}},e.addMovieClip=function(e,i,s){if(this._data)throw t.ERR_RUNNING;var n=e.frameBounds,r=i||e.bounds||e.nominalBounds;if(!r&&e.getBounds&&(r=e.getBounds()),!r&&!n)return null;for(var a=this._frames.length,o=e.timeline.duration,h=0;o>h;h++){var c=n&&n[h]?n[h]:r;this.addFrame(e,c,s,function(t){var e=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(t),this.actionsEnabled=e},[h],e)}var l=e.timeline._labels,u=[];for(var p in l)u.push({index:l[p],label:p});if(u.length){u.sort(function(t,e){return t.index-e.index});for(var h=0,d=u.length;d>h;h++){for(var f=u[h].label,m=a+u[h].index,v=a+(h==d-1?o:u[h+1].index),g=[],_=m;v>_;_++)g.push(_);this.addAnimation(f,g,!0)}}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,animations:this._animations};var s=this._frames.slice();if(s.sort(function(t,e){return t.height<=e.height?-1:1}),s[s.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var n=0,r=0,a=0;s.length;){var o=this._fillRow(s,n,a,i,e);if(o.w>r&&(r=o.w),n+=o.h,!o.h||!s.length){var h=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");h.width=this._getSize(r,this.maxWidth),h.height=this._getSize(n,this.maxHeight),this._data.images[a]=h,o.h||(r=n=0,a++)}}},e._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},e._fillRow=function(e,i,s,n,r){var a=this.maxWidth,o=this.maxHeight;i+=r;for(var h=o-i,c=r,l=0,u=e.length-1;u>=0;u--){var p=e[u],d=this._scale*p.scale,f=p.sourceRect,m=p.source,v=Math.floor(d*f.x-r),g=Math.floor(d*f.y-r),_=Math.ceil(d*f.height+2*r),y=Math.ceil(d*f.width+2*r);if(y>a)throw t.ERR_DIMENSIONS;_>h||c+y>a||(p.img=s,p.rect=new createjs.Rectangle(c,i,y,_),l=l||_,e.splice(u,1),n[p.index]=[c,i,y,_,s,Math.round(-v+d*m.regX-r),Math.round(-g+d*m.regY-r)],c+=y)}return{w:c,h:l}},e._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,i=!1;e>(new Date).getTime();)if(!this._drawNext()){i=!0;break}if(i)this._endBuild();else{var s=this;this._timerID=setTimeout(function(){s._run()},50-t)}var n=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var r=new createjs.Event("progress");r.progress=n,this.dispatchEvent(r)}},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,s=t.sourceRect,n=this._data.images[t.img],r=n.getContext("2d");return t.funct&&t.funct.apply(t.scope,t.params),r.save(),r.beginPath(),r.rect(i.x,i.y,i.width,i.height),r.clip(),r.translate(Math.ceil(i.x-s.x*e),Math.ceil(i.y-s.y*e)),r.scale(e,e),t.source.draw(r),r.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.DisplayObject;
e.htmlElement=null,e._oldMtx=null,e._visible=!1,e.DisplayObject_initialize=e.initialize,e.initialize=function(t){"string"==typeof t&&(t=document.getElementById(t)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=t;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%"},e.isVisible=function(){return null!=this.htmlElement},e.draw=function(){return this.visible&&(this._visible=!0),!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e.DisplayObject__tick=e._tick,e._tick=function(t){var e=this.getStage();this._visible=!1,e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(){var t=this.htmlElement;if(t){var e=t.style,i=this._visible?"visible":"hidden";if(i!=e.visibility&&(e.visibility=i),this._visible){var s=this.getConcatenatedMatrix(this._matrix),n=this._oldMtx,r=1e4;if(n&&n.alpha==s.alpha||(e.opacity=""+(s.alpha*r|0)/r,n&&(n.alpha=s.alpha)),!n||n.tx!=s.tx||n.ty!=s.ty||n.a!=s.a||n.b!=s.b||n.c!=s.c||n.d!=s.d){var a="matrix("+(s.a*r|0)/r+","+(s.b*r|0)/r+","+(s.c*r|0)/r+","+(s.d*r|0)/r+","+(s.tx+.5|0);e.transform=e.WebkitTransform=e.OTransform=e.msTransform=a+","+(s.ty+.5|0)+")",e.MozTransform=a+"px,"+(s.ty+.5|0)+"px)",this._oldMtx=n?n.copy(s):s.clone()}}}},createjs.DOMElement=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.initialize()},e=t.prototype;e.initialize=function(){},e.getBounds=function(){return null},e.applyFilter=function(){},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},createjs.Filter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i){this.initialize(t,e,i)},e=t.prototype=new createjs.Filter;e.initialize=function(t,e,i){(isNaN(t)||0>t)&&(t=0),this.blurX=0|t,(isNaN(e)||0>e)&&(e=0),this.blurY=0|e,(isNaN(i)||1>i)&&(i=1),this.quality=0|i},e.blurX=0,e.blurY=0,e.quality=1,e.mul_table=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.shg_table=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(){var t=.5*Math.pow(this.quality,.6);return new createjs.Rectangle(-this.blurX*t,-this.blurY*t,2*this.blurX*t,2*this.blurY*t)},e.applyFilter=function(t,e,i,s,n,r,a,o){r=r||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,s,n)}catch(t){return!1}var c=this.blurX/2;if(isNaN(c)||0>c)return!1;c|=0;var l=this.blurY/2;if(isNaN(l)||0>l)return!1;if(l|=0,0==c&&0==l)return!1;var u=this.quality;(isNaN(u)||1>u)&&(u=1),u|=0,u>3&&(u=3),1>u&&(u=1);var e,i,p,d,f,m,v,g,_,y,w,b,S,x,T,C=h.data,O=c+c+1,E=l+l+1,j=s-1,k=n-1,M=c+1,I=l+1,D={r:0,b:0,g:0,a:0,next:null},R=D;for(p=1;O>p;p++)R=R.next={r:0,b:0,g:0,a:0,next:null},p==M;R.next=D;var L={r:0,b:0,g:0,a:0,next:null},A=L;for(p=1;E>p;p++)A=A.next={r:0,b:0,g:0,a:0,next:null},p==I;A.next=L;for(var P=null;u-- >0;){v=m=0;var F=this.mul_table[c],N=this.shg_table[c];for(i=n;--i>-1;){for(g=M*(b=C[m]),_=M*(S=C[m+1]),y=M*(x=C[m+2]),w=M*(T=C[m+3]),R=D,p=M;--p>-1;)R.r=b,R.g=S,R.b=x,R.a=T,R=R.next;for(p=1;M>p;p++)d=m+((p>j?j:p)<<2),g+=R.r=C[d],_+=R.g=C[d+1],y+=R.b=C[d+2],w+=R.a=C[d+3],R=R.next;for(P=D,e=0;s>e;e++)C[m++]=g*F>>>N,C[m++]=_*F>>>N,C[m++]=y*F>>>N,C[m++]=w*F>>>N,d=v+((d=e+c+1)<j?d:j)<<2,g-=P.r-(P.r=C[d]),_-=P.g-(P.g=C[d+1]),y-=P.b-(P.b=C[d+2]),w-=P.a-(P.a=C[d+3]),P=P.next;v+=s}for(F=this.mul_table[l],N=this.shg_table[l],e=0;s>e;e++){for(m=e<<2,g=I*(b=C[m]),_=I*(S=C[m+1]),y=I*(x=C[m+2]),w=I*(T=C[m+3]),A=L,p=0;I>p;p++)A.r=b,A.g=S,A.b=x,A.a=T,A=A.next;for(f=s,p=1;l>=p;p++)m=f+e<<2,g+=A.r=C[m],_+=A.g=C[m+1],y+=A.b=C[m+2],w+=A.a=C[m+3],A=A.next,k>p&&(f+=s);if(m=e,P=L,u>0)for(i=0;n>i;i++)d=m<<2,C[d+3]=T=w*F>>>N,T>0?(C[d]=g*F>>>N,C[d+1]=_*F>>>N,C[d+2]=y*F>>>N):C[d]=C[d+1]=C[d+2]=0,d=e+((d=i+I)<k?d:k)*s<<2,g-=P.r-(P.r=C[d]),_-=P.g-(P.g=C[d+1]),y-=P.b-(P.b=C[d+2]),w-=P.a-(P.a=C[d+3]),P=P.next,m+=s;else for(i=0;n>i;i++)d=m<<2,C[d+3]=T=w*F>>>N,T>0?(T=255/T,C[d]=(g*F>>>N)*T,C[d+1]=(_*F>>>N)*T,C[d+2]=(y*F>>>N)*T):C[d]=C[d+1]=C[d+2]=0,d=e+((d=i+I)<k?d:k)*s<<2,g-=P.r-(P.r=C[d]),_-=P.g-(P.g=C[d+1]),y-=P.b-(P.b=C[d+2]),w-=P.a-(P.a=C[d+3]),P=P.next,m+=s}}return r.putImageData(h,a,o),!0},e.clone=function(){return new t(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},createjs.BlurFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.Filter;e.initialize=function(t){this.alphaMap=t},e.alphaMap=null,e._alphaMap=null,e._mapData=null,e.applyFilter=function(t,e,i,s,n,r,a,o){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;r=r||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,s,n)}catch(t){return!1}for(var c=h.data,l=this._mapData,u=c.length,p=0;u>p;p+=4)c[p+3]=l[p]||0;return r.putImageData(h,a,o),!0},e.clone=function(){return new t(this.alphaMap)},e.toString=function(){return"[AlphaMapFilter]"},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,i=e;e instanceof HTMLCanvasElement?t=i.getContext("2d"):(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),i.width=e.width,i.height=e.height,t=i.getContext("2d"),t.drawImage(e,0,0));try{var s=t.getImageData(0,0,e.width,e.height)}catch(t){return!1}return this._mapData=s.data,!0},createjs.AlphaMapFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.Filter;e.initialize=function(t){this.mask=t},e.mask=null,e.applyFilter=function(t,e,i,s,n,r,a,o){return!this.mask||(r=r||t,null==a&&(a=e),null==o&&(o=i),r.save(),r.globalCompositeOperation="destination-in",r.drawImage(this.mask,a,o),r.restore(),!0)},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,s,n,r,a,o){this.initialize(t,e,i,s,n,r,a,o)},e=t.prototype=new createjs.Filter;e.redMultiplier=1,e.greenMultiplier=1,e.blueMultiplier=1,e.alphaMultiplier=1,e.redOffset=0,e.greenOffset=0,e.blueOffset=0,e.alphaOffset=0,e.initialize=function(t,e,i,s,n,r,a,o){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=s?s:1,this.redOffset=n||0,this.greenOffset=r||0,this.blueOffset=a||0,this.alphaOffset=o||0},e.applyFilter=function(t,e,i,s,n,r,a,o){r=r||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,s,n)}catch(t){return!1}for(var c=h.data,l=c.length,u=0;l>u;u+=4)c[u]=c[u]*this.redMultiplier+this.redOffset,c[u+1]=c[u+1]*this.greenMultiplier+this.greenOffset,c[u+2]=c[u+2]*this.blueMultiplier+this.blueOffset,c[u+3]=c[u+3]*this.alphaMultiplier+this.alphaOffset;return r.putImageData(h,a,o),!0},e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},createjs.ColorFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,s){this.initialize(t,e,i,s)},e=t.prototype;t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,e.initialize=function(t,e,i,s){return this.reset(),this.adjustColor(t,e,i,s),this},e.reset=function(){return this.copyMatrix(t.IDENTITY_MATRIX)},e.adjustColor=function(t,e,i,s){return this.adjustHue(s),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},e.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},e.adjustContrast=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var i;return 0>e?i=127+e/100*127:(i=e%1,i=0==i?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[(e<<0)+1]*i,i=127*i+127),this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},e.adjustSaturation=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var e=1+(t>0?3*t/100:t/100),i=.3086,s=.6094,n=.082;return this._multiplyMatrix([i*(1-e)+e,s*(1-e),n*(1-e),0,0,i*(1-e),s*(1-e)+e,n*(1-e),0,0,i*(1-e),s*(1-e),n*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),s=.213,n=.715,r=.072;return this._multiplyMatrix([s+e*(1-s)+i*-s,n+e*-n+i*-n,r+e*-r+i*(1-r),0,0,s+e*-s+.143*i,n+e*(1-n)+.14*i,r+e*-r+i*-.283,0,0,s+e*-s+i*-(1-s),n+e*-n+i*n,r+e*(1-r)+i*r,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(e){return e=this._fixMatrix(e),e.length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},e.clone=function(){return(new t).copyMatrix(this)},e.toArray=function(){for(var e=[],i=0,s=t.LENGTH;s>i;i++)e[i]=this[i];return e},e.copyMatrix=function(e){for(var i=t.LENGTH,s=0;i>s;s++)this[s]=e[s];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){for(var e=[],i=0;5>i;i++){for(var s=0;5>s;s++)e[s]=this[s+5*i];for(var s=0;5>s;s++){for(var n=0,r=0;5>r;r++)n+=t[s+5*r]*e[r];this[s+5*i]=n}}},e._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},createjs.ColorMatrix=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this.initialize(t)},e=t.prototype=new createjs.Filter;e.matrix=null,e.initialize=function(t){this.matrix=t},e.applyFilter=function(t,e,i,s,n,r,a,o){r=r||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,s,n)}catch(t){return!1}for(var c,l,u,p,d=h.data,f=d.length,m=this.matrix,v=m[0],g=m[1],_=m[2],y=m[3],w=m[4],b=m[5],S=m[6],x=m[7],T=m[8],C=m[9],O=m[10],E=m[11],j=m[12],k=m[13],M=m[14],I=m[15],D=m[16],R=m[17],L=m[18],A=m[19],P=0;f>P;P+=4)c=d[P],l=d[P+1],u=d[P+2],p=d[P+3],d[P]=c*v+l*g+u*_+p*y+w,d[P+1]=c*b+l*S+u*x+p*T+C,d[P+2]=c*O+l*E+u*j+p*k+M,d[P+3]=c*I+l*D+u*R+p*L+A;return r.putImageData(h,a,o),!0},e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},createjs.ColorMatrixFilter=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){throw"Touch cannot be instantiated"};t.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0},t.enable=function(e,i,s){return!!(e&&e.canvas&&t.isSupported())&&(e.__touch={pointers:{},multitouch:!i,preventDefault:!s,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e),!0)},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e))},t._IOS_enable=function(e){var i=e.canvas,s=e.__touch.f=function(i){t._IOS_handleEvent(e,i)};i.addEventListener("touchstart",s,!1),i.addEventListener("touchmove",s,!1),i.addEventListener("touchend",s,!1),i.addEventListener("touchcancel",s,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,s=e.type,n=0,r=i.length;r>n;n++){var a=i[n],o=a.identifier;a.target==t.canvas&&("touchstart"==s?this._handleStart(t,o,e,a.pageX,a.pageY):"touchmove"==s?this._handleMove(t,o,e,a.pageX,a.pageY):("touchend"==s||"touchcancel"==s)&&this._handleEnd(t,o,e))}}},t._IE_enable=function(e){var i=e.canvas,s=e.__touch.f=function(i){t._IE_handleEvent(e,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",s,!1),window.addEventListener("MSPointerMove",s,!1),window.addEventListener("MSPointerUp",s,!1),window.addEventListener("MSPointerCancel",s,!1),e.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",s,!1),window.addEventListener("pointermove",s,!1),window.addEventListener("pointerup",s,!1),window.addEventListener("pointercancel",s,!1),e.__touch.preventDefault&&(i.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,s=e.pointerId,n=t.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(e.srcElement!=t.canvas)return;n[s]=!0,this._handleStart(t,s,e,e.pageX,e.pageY)}else n[s]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(t,s,e,e.pageX,e.pageY):("MSPointerUp"==i||"MSPointerCancel"==i||"pointerup"==i||"pointercancel"==i)&&(delete n[s],this._handleEnd(t,s,e)))}},t._handleStart=function(t,e,i,s,n){var r=t.__touch;if(r.multitouch||!r.count){var a=r.pointers;a[e]||(a[e]=!0,r.count++,t._handlePointerDown(e,i,s,n))}},t._handleMove=function(t,e,i,s,n){t.__touch.pointers[e]&&t._handlePointerMove(e,i,s,n)},t._handleEnd=function(t,e,i){var s=t.__touch,n=s.pointers;n[e]&&(s.count--,t._handlePointerUp(e,i,!0),delete n[e])},createjs.Touch=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.EaselJS=createjs.EaselJS||{};t.version="0.7.1",t.buildDate="Mon, 28 Jul 2014 17:24:34 GMT"}(),!function(t){function e(){this._events={},this._conf&&i.call(this,this._conf)}function i(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function s(t){this._events={},this.newListener=!1,i.call(this,t)}function n(t,e,i,s){if(!i)return[];var r,a,o,h,c,l,u,p=[],d=e.length,f=e[s],m=e[s+1];if(s===d&&i._listeners){if("function"==typeof i._listeners)return t&&t.push(i._listeners),[i];for(r=0,a=i._listeners.length;r<a;r++)t&&t.push(i._listeners[r]);return[i]}if("*"===f||"**"===f||i[f]){if("*"===f){for(o in i)"_listeners"!==o&&i.hasOwnProperty(o)&&(p=p.concat(n(t,e,i[o],s+1)));return p}if("**"===f){u=s+1===d||s+2===d&&"*"===m,u&&i._listeners&&(p=p.concat(n(t,e,i,d)));for(o in i)"_listeners"!==o&&i.hasOwnProperty(o)&&("*"===o||"**"===o?(i[o]._listeners&&!u&&(p=p.concat(n(t,e,i[o],d))),p=p.concat(n(t,e,i[o],s))):p=o===m?p.concat(n(t,e,i[o],s+2)):p.concat(n(t,e,i[o],s)));return p}p=p.concat(n(t,e,i[f],s+1))}if(h=i["*"],h&&n(t,e,h,s+1),c=i["**"])if(s<d){c._listeners&&n(t,e,c,d);for(o in c)"_listeners"!==o&&c.hasOwnProperty(o)&&(o===m?n(t,e,c[o],s+2):o===f?n(t,e,c[o],s+1):(l={},l[o]=c[o],n(t,e,{"**":l},s+1)))}else c._listeners?n(t,e,c,d):c["*"]&&c["*"]._listeners&&n(t,e,c["*"],d);return p}function r(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var i=0,s=t.length;i+1<s;i++)if("**"===t[i]&&"**"===t[i+1])return;for(var n=this.listenerTree,r=t.shift();r;){if(n[r]||(n[r]={}),n=n[r],0===t.length){if(n._listeners){if("function"==typeof n._listeners)n._listeners=[n._listeners,e];else if(a(n._listeners)&&(n._listeners.push(e),!n._listeners.warned)){var h=o;"undefined"!=typeof this._events.maxListeners&&(h=this._events.maxListeners),h>0&&n._listeners.length>h&&(n._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",n._listeners.length),console.trace())}}else n._listeners=e;return!0}r=t.shift()}return!0}var a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=10;s.prototype.delimiter=".",s.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},s.prototype.event="",s.prototype.once=function(t,e){return this.many(t,1,e),this},s.prototype.many=function(t,e,i){function s(){0===--e&&n.off(t,s),i.apply(this,arguments)}var n=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");return s._origin=i,this.on(t,s),n},s.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var i=arguments.length,s=new Array(i-1),r=1;r<i;r++)s[r-1]=arguments[r];for(r=0,i=this._all.length;r<i;r++)this.event=t,this._all[r].apply(this,s)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var a;if(this.wildcard){a=[];var o="string"==typeof t?t.split(this.delimiter):t.slice();n.call(this,a,o,this.listenerTree,0)}else a=this._events[t];if("function"==typeof a){if(this.event=t,1===arguments.length)a.call(this);else if(arguments.length>1)switch(arguments.length){case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(var i=arguments.length,s=new Array(i-1),r=1;r<i;r++)s[r-1]=arguments[r];a.apply(this,s)}return!0}if(a){for(var i=arguments.length,s=new Array(i-1),r=1;r<i;r++)s[r-1]=arguments[r];for(var h=a.slice(),r=0,i=h.length;r<i;r++)this.event=t,h[r].apply(this,s);return h.length>0||!!this._all}return!!this._all},s.prototype.on=function(t,i){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof i)throw new Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,i),this.wildcard)return r.call(this,t,i),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],i];else if(a(this._events[t])&&(this._events[t].push(i),!this._events[t].warned)){var s=o;"undefined"!=typeof this._events.maxListeners&&(s=this._events.maxListeners),s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=i;return this},s.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},s.prototype.addListener=s.prototype.on,s.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var i,s=[];if(this.wildcard){var r="string"==typeof t?t.split(this.delimiter):t.slice();s=n.call(this,null,r,this.listenerTree,0)}else{if(!this._events[t])return this;i=this._events[t],s.push({_listeners:i})}for(var o=0;o<s.length;o++){var h=s[o];if(i=h._listeners,a(i)){for(var c=-1,l=0,u=i.length;l<u;l++)if(i[l]===e||i[l].listener&&i[l].listener===e||i[l]._origin&&i[l]._origin===e){c=l;break}if(c<0)continue;return this.wildcard?h._listeners.splice(c,1):this._events[t].splice(c,1),0===i.length&&(this.wildcard?delete h._listeners:delete this._events[t]),this}(i===e||i.listener&&i.listener===e||i._origin&&i._origin===e)&&(this.wildcard?delete h._listeners:delete this._events[t])}return this},s.prototype.offAny=function(t){var e,i=0,s=0;if(t&&this._all&&this._all.length>0){for(e=this._all,i=0,s=e.length;i<s;i++)if(t===e[i])return e.splice(i,1),this}else this._all=[];return this},s.prototype.removeListener=s.prototype.off,s.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var i="string"==typeof t?t.split(this.delimiter):t.slice(),s=n.call(this,null,i,this.listenerTree,0),r=0;r<s.length;r++){var a=s[r];a._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},s.prototype.listeners=function(t){if(this.wildcard){var i=[],s="string"==typeof t?t.split(this.delimiter):t.slice();return n.call(this,i,s,this.listenerTree,0),i}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},s.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return s}):"object"==typeof exports?exports.EventEmitter2=s:window.EventEmitter2=s}();var NAV2D=NAV2D||{REVISION:"0.3.0"};NAV2D.ImageMapClientNav=function(t){var e=this;t=t||{},this.ros=t.ros;var i=t.topic||"/map_metadata",s=t.image;this.serverName=t.serverName||"/move_base",this.actionName=t.actionName||"move_base_msgs/MoveBaseAction",this.rootObject=t.rootObject||new createjs.Container,this.viewer=t.viewer,this.withOrientation=t.withOrientation||!1,this.navigator=null;var n=new ROS2D.ImageMapClient({ros:this.ros,rootObject:this.rootObject,topic:i,image:s});n.on("change",function(){e.navigator=new NAV2D.Navigator({ros:e.ros,serverName:e.serverName,actionName:e.actionName,rootObject:e.rootObject,withOrientation:e.withOrientation}),e.viewer.scaleToDimensions(n.currentImage.width,n.currentImage.height),e.viewer.shift(n.currentImage.pose.position.x,n.currentImage.pose.position.y)})};var robotMarker_Visible=!0;NAV2D.Navigator=function(t){function e(t){var e=new ROSLIB.Goal({actionClient:c,goalMessage:{target_pose:{header:{frame_id:"/map"},pose:t}}});e.send();var i=new ROS2D.NavigationArrow({size:15,strokeSize:1,fillColor:createjs.Graphics.getRGB(255,64,128,.66),pulse:!0});i.x=t.position.x,i.y=-t.position.y,i.rotation=h.rosQuaternionToGlobalTheta(t.orientation),i.scaleX=1/h.scaleX,i.scaleY=1/h.scaleY,s.rootObject.addChild(i),e.on("result",function(){s.rootObject.removeChild(i)})}function i(t){var e=new ROSLIB.Topic({ros:n,name:"/initialpose",messageType:"geometry_msgs/PoseWithCovarianceStamped"}),i=new ROSLIB.Message({header:{frame_id:"/map"},pose:{pose:t}});e.publish(i)}var s=this;t=t||{};var n=t.ros,r=t.serverName||"/move_base",a=t.actionName||"move_base_msgs/MoveBaseAction",o=t.withOrientation||!1;this.rootObject=t.rootObject||new createjs.Container;var h,c=new ROSLIB.ActionClient({ros:n,actionName:a,serverName:r});h=s.rootObject instanceof createjs.Stage?s.rootObject:s.rootObject.getStage();var l=new ROS2D.NavigationArrow({size:25,strokeSize:1,fillColor:createjs.Graphics.getRGB(255,128,0,.66),pulse:!0});l.visible=!1,this.rootObject.addChild(l);var u=!1,p=this.rootObject,d=new ROSLIB.Topic({ros:n,name:"/robot_pose",messageType:"geometry_msgs/Pose",throttle_rate:100});if(d.subscribe(function(t){l.x=t.position.x,l.y=-t.position.y,u||(l.scaleX=1/h.scaleX,l.scaleY=1/h.scaleY,u=!0),l.rotation=h.rosQuaternionToGlobalTheta(t.orientation),robotMarker_Visible?(l.visible=!0,p.addChild(l)):(l.visible=!1,p.removeChild(l))}),o===!1)this.rootObject.addEventListener("dblclick",function(t){var s=h.globalToRos(t.stageX,t.stageY),n=new ROSLIB.Pose({position:new ROSLIB.Vector3(s)});"goal"==action?e(n):"pose"==action&&i(n)});else{var f=null,m=null,v=0,g=0,_=null,y=!1,w=0,b=0,S=function(t,n){if("down"===n)f=h.globalToRos(t.stageX,t.stageY),m=new ROSLIB.Vector3(f),y=!0;else if("move"===n){if(s.rootObject.removeChild(_),y===!0){var r=h.globalToRos(t.stageX,t.stageY),a=new ROSLIB.Vector3(r);_=new ROS2D.NavigationArrow({size:25,strokeSize:1,fillColor:createjs.Graphics.getRGB(0,255,0,.66),pulse:!1}),w=a.x-m.x,b=a.y-m.y,v=Math.atan2(w,b),g=v*(180/Math.PI),g>=0&&g<=180?g+=270:g-=90,_.x=m.x,_.y=-m.y,_.rotation=g,_.scaleX=1/h.scaleX,_.scaleY=1/h.scaleY,s.rootObject.addChild(_)}}else if(y){y=!1;var o=h.globalToRos(t.stageX,t.stageY),c=new ROSLIB.Vector3(o);w=c.x-m.x,b=c.y-m.y,v=Math.atan2(w,b),v>=0&&v<=Math.PI?v+=3*Math.PI/2:v-=Math.PI/2;var l=Math.sin(-v/2),u=Math.cos(-v/2),p=new ROSLIB.Quaternion({x:0,y:0,z:l,w:u}),d=new ROSLIB.Pose({position:m,orientation:p});"goal"==action?e(d):"pose"==action&&i(d)}};this.rootObject.addEventListener("stagemousedown",function(t){S(t,"down")}),this.rootObject.addEventListener("stagemousemove",function(t){S(t,"move")}),this.rootObject.addEventListener("stagemouseup",function(t){S(t,"up")})}},NAV2D.OccupancyGridClientNav=function(t){var e=this;t=t||{},this.ros=t.ros;var i=t.topic||"/map",s=t.continuous;this.serverName=t.serverName||"/move_base",this.actionName=t.actionName||"move_base_msgs/MoveBaseAction",this.rootObject=t.rootObject||new createjs.Container,this.viewer=t.viewer,this.withOrientation=t.withOrientation||!1,this.navigator=null;var n=new ROS2D.OccupancyGridClient({ros:this.ros,rootObject:this.rootObject,continuous:s,topic:i});n.on("change",function(){e.navigator=new NAV2D.Navigator({ros:e.ros,serverName:e.serverName,actionName:e.actionName,rootObject:e.rootObject,withOrientation:e.withOrientation}),e.viewer.scaleToDimensions(n.currentGrid.width,n.currentGrid.height),e.viewer.shift(n.currentGrid.pose.position.x,n.currentGrid.pose.position.y)})},function(t){this.NavigationService=t()}(function(){function t(){this.version="v2.1.0";var t,e,i,s,n=null,r=null,a=0,o=0,h={Navigation:"navigation",Gmapping:"gmapping",Coverting:"converting",Cancel:"cancel",GamppingPose:"gmapping_pose",SaveMap:"save_map",SaveMapEdit:"save_map_edit",SaveAsMap:"save_as_map",SaveAsMapEdit:"save_as_map_edit",Userauth:"user_auth",Map_Select:"dbparam-select",Map_Delete:"dbparam-delete",Map_Update:"dbparam-update",Map_Insert:"dbparam-insert",Update:"update",Roslog_delete:"roslog-delete",Roslog_select:"roslog-select",Shutdown:"shutdown",Reboot:"reboot",Version:"version"},c={ChargeUp:'rostopic pub -1 /auto_charge std_msgs/Byte "1"',ChargeDown:'rostopic pub -1 /auto_charge std_msgs/Byte "0"',Joystick:'_JOYSTICK=`rosnode list | grep teleop_joystic`; if [[ -n $_JOYSTICK ]]; then _FB="joy_on"; else _FB="joy_off"; fi; rostopic pub -1 /shell_feedback std_msgs/String $_FB',JoystickOn:"roslaunch bringup teleop_joystick.launch",JoystickOff:"rosnode kill /teleop_joystick",MapSaveStaus:'roslaunch bringup map_edit_as_saver.launch; rostopic pub -1 /shell_feedback std_msgs/String "map_edit_ok"',PLCopen:'rostopic pub -1 /waypoint_user_pub std_msgs/String "wangjin_open"',PLCclose:'rostopic pub -1 /waypoint_user_pub std_msgs/String "wangjin_close"',PLCstatus:'rostopic pub -1 /waypoint_user_pub std_msgs/String "wangjin_status"',Version:"_RC=`grep '\\''|'\\'' ~/catkin_ws/README.md`;_FB=`echo $_RC | awk -F '\\''|'\\'' '\\''{print $10}'\\''`;_FB=`echo version:$_FB | awk -F '\\'' '\\'' '\\''{print $1$2}'\\''`;rostopic pub -1 /shell_feedback std_msgs/String $_FB;unset _FB; unset _RC;"},l={cmdTopic:{name:"/cmd_string",messageType:"std_msgs/String"},shellTopic:{name:"/shell_string",messageType:"std_msgs/String"},updateTopic:{name:"/system_shell/shell_string",messageType:"std_msgs/String"},imuTopic:{name:"/mobile_imu",messageType:"sensor_msgs/Imu"},velTopic:{name:"/cmd_vel",messageType:"geometry_msgs/Twist"},odomTopic:{name:"/odom",messageType:"nav_msgs/Odometry"},poseTopic:{name:"/robot_pose",messageType:"geometry_msgs/Pose"},diagnosticsTopic:{name:"/diagnostics_agg",messageType:"diagnostic_msgs/DiagnosticArray"},map_editTopic:{name:"/map_edit",messageType:"nav_msgs/OccupancyGrid"},map_edit_asTopic:{name:"/map_edit_as",messageType:"nav_msgs/OccupancyGrid"},waypointTopic:{name:"/waypoints",messageType:"yocs_msgs/WaypointList"},trajectoryTopic:{name:"/trajectories",messageType:"yocs_msgs/TrajectoryList"},waypoint_addTopic:{name:"/waypoint_add",messageType:"yocs_msgs/Waypoint"},waypoint_removeTopic:{name:"/waypoint_remove",messageType:"yocs_msgs/Waypoint"},trajectory_addTopic:{name:"/trajectory_add",messageType:"yocs_msgs/Trajectory"},trajectory_removeTopic:{name:"/trajectory_remove",messageType:"yocs_msgs/Trajectory"},nav_ctrlTopic:{name:"/nav_ctrl",messageType:"yocs_msgs/NavigationControl"},nav_ctrl_statusTopic:{name:"/nav_ctrl_status",messageType:"yocs_msgs/NavigationControlStatus"},shell_feedbackTopic:{name:"/shell_feedback",messageType:"std_msgs/String"}},u={Navigation:"navigation",Gmapping:"gmapping",Coverting:"converting"},p=(new Array,new Array,null),d=function(){return new ROSLIB.ActionClient({ros:n,actionName:"move_base_msgs/MoveBaseAction",serverName:"/move_base"})},f=function(t){return new ROSLIB.Message({data:t})},m=function(t,e){return new ROSLIB.Message({header:{frame_id:"/map",seq:0},info:t,data:e})},v=function(t,e,i,s){return new ROSLIB.Pose({position:{x:t,y:e,z:0},orientation:{x:0,y:0,z:i,w:s}})},g=function(t){return new ROSLIB.Goal({actionClient:d(),goalMessage:{target_pose:{header:{frame_id:"/map"},pose:t}}})},_=function(t,e){return new ROSLIB.Message({linear:{x:t,y:0,z:0},angular:{x:0,y:0,z:e}})},y=function(t){return new ROSLIB.Topic({ros:n,name:t.name,messageType:t.messageType})},w=function(t,e){for(var t=y(t),i=1;i<arguments.length;i++){var s=f(arguments[i]);t.publish(s)}};this.startPostion=v(0,0,0,1),this.navModeStatus=u,this.navModeStatus.navStatus="/Other/ros_mode",this.Init=function(t){var e=t.url||"ws://"+window.location.hostname+":9090";n=new ROSLIB.Ros,n.connect(e),n.on("connection",t.onopen||function(){console.log("connect server %s success",e)}),n.on("close",t.onclose||function(){console.error("connect server %s close",e)}),n.on("error",t.onerror||function(){console.error("connect server %s error",e)})},this.ShowMap=function(t,e,i){
document.getElementById(i).innerHTML="";var s=new ROS2D.Viewer({divID:i,width:t,height:e,background:"#7e7e7e"});NAV2D.OccupancyGridClientNav({ros:n,rootObject:s.scene,continuous:!0,withOrientation:!0,viewer:s,serverName:"/move_base"});return s.scene},this.RemoveMap=function(t){document.getElementById(t).innerHTML=""},this.Gmapping=function(){w(l.cmdTopic,h.Gmapping)},this.Navigation=function(){w(l.cmdTopic,h.Navigation)},this.SaveMap=function(){w(l.cmdTopic,h.GamppingPose,h.SaveMap,h.SaveMapEdit)},this.ShowMapEdit=function(i,s){t=i,e=s,mapEditdiv=document.getElementById(t),mapEditdiv.style.overflow="auto";var n=y(l.map_editTopic);n.subscribe(function(t){r=t,n.unsubscribe();var i=document.getElementById(e),s=i.getContext("2d");i.width=t.info.width,i.height=t.info.height;for(var a=s.createImageData(i.width,i.height),o=0;o<i.height;o++)for(var h=0;h<i.width;h++){var c,l=h+(i.height-o-1)*i.width,u=t.data[l];c=100===u?0:0===u?255:127;var p=4*(h+o*i.width);a.data[p]=c,a.data[++p]=c,a.data[++p]=c,a.data[++p]=255}s.putImageData(a,0,0)})},this.SaveMapEdit=function(){mapEditCanvas=document.getElementById(e);for(var t=new Array,i=mapEditCanvas.getContext("2d"),s=mapEditCanvas,n=i.getImageData(0,0,s.width,s.height),a=0;a<s.height;a++)for(var o=0;o<s.width;o++){var c=o+(s.height-a-1)*s.width,u=4*(o+a*s.width);switch(n.data[u]){case 0:t[c]=100;break;case 255:t[c]=0;break;case 127:t[c]=-1;break;default:t[c]=100}}w(l.cmdTopic,h.SaveAsMapEdit);var p=m(r.info,t),d=y(l.map_edit_asTopic);d.publish(p)},this.goPostion=function(t,e){s=g(t),s.send(),s.on("status",e)},this.UnSubscribeGoal=function(t){s.off("status",t)},this.Cancel=function(){w(l.cmdTopic,h.Cancel)},this.goFront=function(){var t=y(l.velTopic);null!=p&&(clearInterval(p),p=null),p=setInterval(function(){t.publish(_(.25,0))},300)},this.goBack=function(){var t=y(l.velTopic);null!=p&&(clearInterval(p),p=null),p=setInterval(function(){t.publish(_(-.25,0))},300)},this.goLeft=function(){var t=y(l.velTopic);null!=p&&(clearInterval(p),p=null),p=setInterval(function(){t.publish(_(0,.25))},300)},this.goRight=function(){var t=y(l.velTopic);null!=p&&(clearInterval(p),p=null),p=setInterval(function(){t.publish(_(0,-.25))},300)},this.goStop=function(){var t=y(l.velTopic);null!=p&&(clearInterval(p),p=null),t.publish(_(0,0))},this.Subscribe_feedbackTopic=function(t){var e=y(l.shell_feedbackTopic);e.subscribe(t)};var b;this.Subscribe_poseTopic=function(t){b=y(l.poseTopic),b.subscribe(t)},this.UnSubscribe_poseTopic=function(){b.unsubscribe()};var S;this.Subscribe_diagnosticsTopic=function(t){S=y(l.diagnosticsTopic),S.subscribe(t)},this.UnSubscribe_diagnosticsTopic=function(){S.unsubscribe()},this.OpenHandle=function(){w(l.shellTopic,c.JoystickOn,c.Joystick)},this.CloseHandle=function(){w(l.shellTopic,c.JoystickOff,c.Joystick)},this.GetHandleStatus=function(){w(l.shellTopic,c.Joystick)},this.Shutdown=function(){w(l.cmdTopic,h.Shutdown)},this.Reboot=function(){w(l.cmdTopic,h.Reboot)},this.Version=function(){w(l.cmdTopic,h.Version)},this.FixCanvas=function(){document.getElementById(t).style.overflow="hidden"},this.UnFixCanvas=function(){document.getElementById(t).style.overflow="auto"},this.Paint={init:function(){this.x=[],this.y=[],this.clickDrag=[],this.lock=!1,this.storageColor="#000000",this.eraserRadius=10,this.canvas=document.getElementById(e),this.cxt=this.canvas.getContext("2d"),this.cxt.lineJoin="round",this.cxt.lineWidth=6,this.w=this.canvas.width,this.h=this.canvas.height,this.touch="createTouch"in document,this.StartEvent=this.touch?"touchstart":"mousedown",this.MoveEvent=this.touch?"touchmove":"mousemove",this.EndEvent=this.touch?"touchend":"mouseup",this.bind(),i=document.getElementById(t),i.onscroll=function(){a=i.scrollTop,o=i.scrollLeft}},bind:function(){var t=this;this.canvas["on"+t.StartEvent]=function(e){var i=t.touch?e.touches[0]:e,s=i.clientX-i.target.offsetLeft+o,n=i.clientY-i.target.offsetTop+a;t.isEraser?t.resetEraser(s,n,i):(t.movePoint(s,n),t.drawPoint()),t.lock=!0},this.canvas["on"+t.MoveEvent]=function(e){var i=t.touch?e.touches[0]:e;if(t.lock){var s=i.clientX-i.target.offsetLeft+o,n=i.clientY-i.target.offsetTop+a;t.isEraser?t.resetEraser(s,n,i):(t.movePoint(s,n,!0),t.drawPoint())}},this.canvas["on"+t.EndEvent]=function(e){t.lock=!1,t.x=[],t.y=[],t.clickDrag=[],clearInterval(t.Timer),t.Timer=null}},movePoint:function(t,e,i){this.x.push(t),this.y.push(e),this.clickDrag.push(e)},drawPoint:function(t,e,i){for(var s=0;s<this.x.length;s++)this.cxt.beginPath(),this.clickDrag[s]&&s?this.cxt.moveTo(this.x[s-1],this.y[s-1]):this.cxt.moveTo(this.x[s]-1,this.y[s]),this.cxt.lineTo(this.x[s],this.y[s]),this.cxt.closePath(),this.cxt.stroke()}}}return t.debugAll=!1,t}),!function(t,e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&module.exports?module.exports=e():t.ReconnectingWebSocket=e()}(this,function(){function t(e,i,s){function n(t,e){var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,!1,!1,e),i}var r={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3};s||(s={});for(var a in r)this[a]="undefined"!=typeof s[a]?s[a]:r[a];this.url=e,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var o,h=this,c=!1,l=!1,u=document.createElement("div");u.addEventListener("open",function(t){h.onopen(t)}),u.addEventListener("close",function(t){h.onclose(t)}),u.addEventListener("connecting",function(t){h.onconnecting(t)}),u.addEventListener("message",function(t){h.onmessage(t)}),u.addEventListener("error",function(t){h.onerror(t)}),this.addEventListener=u.addEventListener.bind(u),this.removeEventListener=u.removeEventListener.bind(u),this.dispatchEvent=u.dispatchEvent.bind(u),this.open=function(e){o=new WebSocket(h.url,i||[]),e||u.dispatchEvent(n("connecting")),(h.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",h.url);var s=o,r=setTimeout(function(){(h.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",h.url),l=!0,s.close(),l=!1},h.timeoutInterval);o.onopen=function(){clearTimeout(r),(h.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onopen",h.url),h.protocol=o.protocol,h.readyState=WebSocket.OPEN,h.reconnectAttempts=0;var i=n("open");i.isReconnect=e,e=!1,u.dispatchEvent(i)},o.onclose=function(i){if(clearTimeout(r),o=null,c)h.readyState=WebSocket.CLOSED,u.dispatchEvent(n("close"));else{h.readyState=WebSocket.CONNECTING;var s=n("connecting");s.code=i.code,s.reason=i.reason,s.wasClean=i.wasClean,u.dispatchEvent(s),e||l||((h.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onclose",h.url),u.dispatchEvent(n("close")));var r=h.reconnectInterval*Math.pow(h.reconnectDecay,h.reconnectAttempts);setTimeout(function(){h.reconnectAttempts++,h.open(!0)},r>h.maxReconnectInterval?h.maxReconnectInterval:r)}},o.onmessage=function(e){(h.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",h.url,e.data);var i=n("message");i.data=e.data,u.dispatchEvent(i)},o.onerror=function(e){(h.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","onerror",h.url,e),u.dispatchEvent(n("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(e){if(o)return(h.debug||t.debugAll)&&console.debug("ReconnectingWebSocket","send",h.url,e),o.send(e);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(t,e){"undefined"==typeof t&&(t=1e3),c=!0,o&&o.close(t,e)},this.refresh=function(){o&&o.close()}}return t.prototype.onopen=function(){},t.prototype.onclose=function(){},t.prototype.onconnecting=function(){},t.prototype.onmessage=function(){},t.prototype.onerror=function(){},t.debugAll=!1,t.CONNECTING=WebSocket.CONNECTING,t.OPEN=WebSocket.OPEN,t.CLOSING=WebSocket.CLOSING,t.CLOSED=WebSocket.CLOSED,t});var ROS2D=ROS2D||{REVISION:"0.8.0-SNAPSHOT"};createjs.Stage.prototype.globalToRos=function(t,e){var i=(t-this.x)/this.scaleX,s=(this.y-e)/this.scaleY;return new ROSLIB.Vector3({x:i,y:s})},createjs.Stage.prototype.rosToGlobal=function(t){var e=t.x*this.scaleX+this.x,i=t.y*this.scaleY+this.y;return{x:e,y:i}},createjs.Stage.prototype.rosQuaternionToGlobalTheta=function(t){var e=t.w,i=t.x,s=t.y,n=t.z;return 180*-Math.atan2(2*(e*n+i*s),1-2*(s*s+n*n))/Math.PI},ROS2D.ImageMap=function(t){t=t||{};var e=t.message,i=t.image;this.pose=new ROSLIB.Pose({position:e.origin.position,orientation:e.origin.orientation}),this.width=e.width,this.height=e.height,createjs.Bitmap.call(this,i),this.y=-this.height*e.resolution,this.scaleX=e.resolution,this.scaleY=e.resolution,this.width*=this.scaleX,this.height*=this.scaleY,this.x+=this.pose.position.x,this.y-=this.pose.position.y},ROS2D.ImageMap.prototype.__proto__=createjs.Bitmap.prototype,ROS2D.ImageMapClient=function(t){var e=this;t=t||{};var i=t.ros,s=t.topic||"/map_metadata";this.image=t.image,this.rootObject=t.rootObject||new createjs.Container,this.currentImage=new createjs.Shape;var n=new ROSLIB.Topic({ros:i,name:s,messageType:"nav_msgs/MapMetaData"});n.subscribe(function(t){n.unsubscribe(),e.currentImage=new ROS2D.ImageMap({message:t,image:e.image}),e.rootObject.addChild(e.currentImage),e.rootObject.addChild(new ROS2D.Grid({size:1})),e.emit("change")})},ROS2D.ImageMapClient.prototype.__proto__=EventEmitter2.prototype,ROS2D.OccupancyGrid=function(t){t=t||{};var e=t.message,i=document.createElement("canvas"),s=i.getContext("2d");this.pose=new ROSLIB.Pose({position:e.info.origin.position,orientation:e.info.origin.orientation}),this.width=e.info.width,this.height=e.info.height,i.width=this.width,i.height=this.height;for(var n=s.createImageData(this.width,this.height),r=0;r<this.height;r++)for(var a=0;a<this.width;a++){var o,h=a+(this.height-r-1)*this.width,c=e.data[h];o=100===c?0:0===c?255:127;var l=4*(a+r*this.width);n.data[l]=o,n.data[++l]=o,n.data[++l]=o,n.data[++l]=255}s.putImageData(n,0,0),createjs.Bitmap.call(this,i),this.y=-this.height*e.info.resolution,this.scaleX=e.info.resolution,this.scaleY=e.info.resolution,this.width*=this.scaleX,this.height*=this.scaleY,this.x+=this.pose.position.x,this.y-=this.pose.position.y},ROS2D.OccupancyGrid.prototype.__proto__=createjs.Bitmap.prototype,ROS2D.OccupancyGridClient=function(t){var e=this;t=t||{};var i=t.ros,s=t.topic||"/map";this.continuous=t.continuous,this.rootObject=t.rootObject||new createjs.Container,this.currentGrid=new createjs.Shape,this.rootObject.addChild(this.currentGrid),this.rootObject.addChild(new ROS2D.Grid({size:1}));var n=new ROSLIB.Topic({ros:i,name:s,messageType:"nav_msgs/OccupancyGrid",compression:"png"});n.subscribe(function(t){var i=null;e.currentGrid&&(i=e.rootObject.getChildIndex(e.currentGrid),e.rootObject.removeChild(e.currentGrid)),e.currentGrid=new ROS2D.OccupancyGrid({message:t}),null!==i?e.rootObject.addChildAt(e.currentGrid,i):e.rootObject.addChild(e.currentGrid),e.emit("change"),e.continuous||n.unsubscribe()})},ROS2D.OccupancyGridClient.prototype.__proto__=EventEmitter2.prototype,ROS2D.OccupancyGridSrvClient=function(t){var e=this;t=t||{};var i=t.ros,s=t.service||"/static_map";this.rootObject=t.rootObject||new createjs.Container,this.currentGrid=null;var n=new ROSLIB.Service({ros:i,name:s,serviceType:"nav_msgs/GetMap",compression:"png"});n.callService(new ROSLIB.ServiceRequest,function(t){e.currentGrid&&e.rootObject.removeChild(e.currentGrid),e.currentGrid=new ROS2D.OccupancyGrid({message:t.map}),e.rootObject.addChild(e.currentGrid),e.emit("change",e.currentGrid)})},ROS2D.OccupancyGridSrvClient.prototype.__proto__=EventEmitter2.prototype,ROS2D.ArrowShape=function(t){var e=this;t=t||{};var i=t.size||10,s=t.strokeSize||3,n=t.strokeColor||createjs.Graphics.getRGB(0,0,0),r=t.fillColor||createjs.Graphics.getRGB(255,0,0),a=t.pulse,o=new createjs.Graphics,h=i/3,c=2*h/3;if(o.setStrokeStyle(s),o.beginStroke(n),o.moveTo(0,0),o.lineTo(i-h,0),o.beginFill(r),o.moveTo(i,0),o.lineTo(i-h,c/2),o.lineTo(i-h,-c/2),o.closePath(),o.endFill(),o.endStroke(),createjs.Shape.call(this,o),a){var l=0,u=!0;createjs.Ticker.addEventListener("tick",function(){u?(e.scaleX*=1.035,e.scaleY*=1.035,u=++l<10):(e.scaleX/=1.035,e.scaleY/=1.035,u=--l<0)})}},ROS2D.ArrowShape.prototype.__proto__=createjs.Shape.prototype,ROS2D.Grid=function(t){t=t||{};var e=t.size||10,i=t.cellSize||.1,s=t.lineWidth||.001,n=new createjs.Graphics;n.setStrokeStyle(5*s),n.beginStroke(createjs.Graphics.getRGB(0,0,0)),n.beginFill(createjs.Graphics.getRGB(255,0,0)),n.moveTo(-e*i,0),n.lineTo(e*i,0),n.moveTo(0,-e*i),n.lineTo(0,e*i),n.endFill(),n.endStroke(),n.setStrokeStyle(s),n.beginStroke(createjs.Graphics.getRGB(0,0,0)),n.beginFill(createjs.Graphics.getRGB(255,0,0));for(var r=-e;r<=e;r++)n.moveTo(-e*i,r*i),n.lineTo(e*i,r*i),n.moveTo(r*i,-e*i),n.lineTo(r*i,e*i);n.endFill(),n.endStroke(),createjs.Shape.call(this,n)},ROS2D.Grid.prototype.__proto__=createjs.Shape.prototype,ROS2D.NavigationArrow=function(t){var e=this;t=t||{};var i=t.size||10,s=t.strokeSize||3,n=t.strokeColor||createjs.Graphics.getRGB(0,0,0),r=t.fillColor||createjs.Graphics.getRGB(255,0,0),a=t.pulse,o=new createjs.Graphics;if(o.setStrokeStyle(s),o.moveTo(-i/2,-i/2),o.beginStroke(n),o.beginFill(r),o.lineTo(i,0),o.lineTo(-i/2,i/2),o.closePath(),o.endFill(),o.endStroke(),createjs.Shape.call(this,o),a){var h=0,c=!0;createjs.Ticker.addEventListener("tick",function(){c?(e.scaleX*=1.035,e.scaleY*=1.035,c=++h<10):(e.scaleX/=1.035,e.scaleY/=1.035,c=--h<0)})}},ROS2D.NavigationArrow.prototype.__proto__=createjs.Shape.prototype,ROS2D.NavigationImage=function(t){var e=this;t=t||{};var i=t.size||10,s=t.image,n=t.pulse,r=t.alpha||1,a={},o=function(){createjs.Bitmap.call(e,c);var t=h(i);if(e.alpha=r,e.scaleX=t,e.scaleY=t,e.regY=e.image.height/2,e.regX=e.image.width/2,a.rotation=e.rotation,Object.defineProperty(e,"rotation",{get:function(){return a.rotation+90},set:function(t){a.rotation=t}}),n){var s=0,o=!0,l=1.02;createjs.Ticker.addEventListener("tick",function(){o?(e.scaleX*=l,e.scaleY*=l,o=++s<10):(e.scaleX/=l,e.scaleY/=l,o=--s<0)})}},h=function(t){return t/c.width},c=new Image;c.onload=o,c.src=s},ROS2D.NavigationImage.prototype.__proto__=createjs.Bitmap.prototype,ROS2D.PathShape=function(t){t=t||{};var e=t.path;if(this.strokeSize=t.strokeSize||3,this.strokeColor=t.strokeColor||createjs.Graphics.getRGB(0,0,0),this.graphics=new createjs.Graphics,null!==e&&"undefined"!=typeof e){this.graphics.setStrokeStyle(this.strokeSize),this.graphics.beginStroke(this.strokeColor),this.graphics.moveTo(e.poses[0].pose.position.x/this.scaleX,e.poses[0].pose.position.y/-this.scaleY);for(var i=1;i<e.poses.length;++i)this.graphics.lineTo(e.poses[i].pose.position.x/this.scaleX,e.poses[i].pose.position.y/-this.scaleY);this.graphics.endStroke()}createjs.Shape.call(this,this.graphics)},ROS2D.PathShape.prototype.setPath=function(t){if(this.graphics.clear(),null!==t&&"undefined"!=typeof t){this.graphics.setStrokeStyle(this.strokeSize),this.graphics.beginStroke(this.strokeColor),this.graphics.moveTo(t.poses[0].pose.position.x/this.scaleX,t.poses[0].pose.position.y/-this.scaleY);for(var e=1;e<t.poses.length;++e)this.graphics.lineTo(t.poses[e].pose.position.x/this.scaleX,t.poses[e].pose.position.y/-this.scaleY);this.graphics.endStroke()}},ROS2D.PathShape.prototype.__proto__=createjs.Shape.prototype,ROS2D.PolygonMarker=function(t){t=t||{},this.lineSize=t.lineSize||3,this.lineColor=t.lineColor||createjs.Graphics.getRGB(0,0,255,.66),this.pointSize=t.pointSize||10,this.pointColor=t.pointColor||createjs.Graphics.getRGB(255,0,0,.66),this.fillColor=t.pointColor||createjs.Graphics.getRGB(0,255,0,.33),this.lineCallBack=t.lineCallBack,this.pointCallBack=t.pointCallBack,this.pointContainer=new createjs.Container,this.lineContainer=new createjs.Container,this.fillShape=new createjs.Shape,createjs.Container.call(this),this.addChild(this.fillShape),this.addChild(this.lineContainer),this.addChild(this.pointContainer)},ROS2D.PolygonMarker.prototype.createLineShape=function(t,e){var i=new createjs.Shape;this.editLineShape(i,t,e);var s=this;return i.addEventListener("mousedown",function(t){null!==s.lineCallBack&&"undefined"!=typeof s.lineCallBack&&s.lineCallBack("mousedown",t,s.lineContainer.getChildIndex(t.target))}),i},ROS2D.PolygonMarker.prototype.editLineShape=function(t,e,i){t.graphics.clear(),t.graphics.setStrokeStyle(this.lineSize),t.graphics.beginStroke(this.lineColor),t.graphics.moveTo(e.x,e.y),t.graphics.lineTo(i.x,i.y)},ROS2D.PolygonMarker.prototype.createPointShape=function(t){var e=new createjs.Shape;e.graphics.beginFill(this.pointColor),e.graphics.drawCircle(0,0,this.pointSize),e.x=t.x,e.y=-t.y;var i=this;return e.addEventListener("mousedown",function(t){null!==i.pointCallBack&&"undefined"!=typeof i.pointCallBack&&i.pointCallBack("mousedown",t,i.pointContainer.getChildIndex(t.target))}),e},ROS2D.PolygonMarker.prototype.addPoint=function(t){var e=this.createPointShape(t);this.pointContainer.addChild(e);var i=this.pointContainer.getNumChildren();if(i<2);else if(i<3){var s=this.createLineShape(this.pointContainer.getChildAt(i-2),e);this.lineContainer.addChild(s)}if(i>2&&this.editLineShape(this.lineContainer.getChildAt(i-2),this.pointContainer.getChildAt(i-2),e),i>1){var n=this.createLineShape(e,this.pointContainer.getChildAt(0));this.lineContainer.addChild(n)}this.drawFill()},ROS2D.PolygonMarker.prototype.remPoint=function(t){var e;e=t instanceof createjs.Shape?this.pointContainer.getChildIndex(t):t;var i=this.pointContainer.getNumChildren();i<2||(i<3?this.lineContainer.removeAllChildren():(this.editLineShape(this.lineContainer.getChildAt((e-1+i)%i),this.pointContainer.getChildAt((e-1+i)%i),this.pointContainer.getChildAt((e+1)%i)),this.lineContainer.removeChildAt(e))),this.pointContainer.removeChildAt(e),this.drawFill()},ROS2D.PolygonMarker.prototype.movePoint=function(t,e){var i,s;t instanceof createjs.Shape?(i=this.pointContainer.getChildIndex(t),s=t):(i=t,s=this.pointContainer.getChildAt(i)),s.x=e.x,s.y=-e.y;var n=this.pointContainer.getNumChildren();if(n>1){var r=this.lineContainer.getChildAt((i-1+n)%n);this.editLineShape(r,this.pointContainer.getChildAt((i-1+n)%n),s);var a=this.lineContainer.getChildAt(i);this.editLineShape(a,s,this.pointContainer.getChildAt((i+1)%n))}this.drawFill()},ROS2D.PolygonMarker.prototype.splitLine=function(t){var e,i;t instanceof createjs.Shape?(e=this.lineContainer.getChildIndex(t),i=t):(e=t,i=this.lineContainer.getChildAt(e));var s=this.pointContainer.getNumChildren(),n=this.pointContainer.getChildAt(e).x,r=this.pointContainer.getChildAt(e).y,a=this.pointContainer.getChildAt((e+1)%s).x,o=this.pointContainer.getChildAt((e+1)%s).y,h=(n+a)/2,c=(r+o)/2,l=new ROSLIB.Vector3({x:h,y:-c}),u=this.createPointShape(l);this.pointContainer.addChildAt(u,e+1),++s;var p=this.createLineShape(u,this.pointContainer.getChildAt((e+2)%s));this.lineContainer.addChildAt(p,e+1),this.editLineShape(i,this.pointContainer.getChildAt(e),u),this.drawFill()},ROS2D.PolygonMarker.prototype.drawFill=function(){var t=this.pointContainer.getNumChildren();if(t>2){var e=this.fillShape.graphics;e.clear(),e.setStrokeStyle(0),e.moveTo(this.pointContainer.getChildAt(0).x,this.pointContainer.getChildAt(0).y),e.beginStroke(),e.beginFill(this.fillColor);for(var i=1;i<t;++i)e.lineTo(this.pointContainer.getChildAt(i).x,this.pointContainer.getChildAt(i).y);e.closePath(),e.endFill(),e.endStroke()}else this.fillShape.graphics.clear()},ROS2D.PolygonMarker.prototype.__proto__=createjs.Container.prototype,ROS2D.TraceShape=function(t){t=t||{};var e=t.pose;this.strokeSize=t.strokeSize||3,this.strokeColor=t.strokeColor||createjs.Graphics.getRGB(0,0,0),this.maxPoses=t.maxPoses||100,this.minDist=t.minDist||.05,this.minDist=this.minDist*this.minDist,this.poses=[],this.graphics=new createjs.Graphics,this.graphics.setStrokeStyle(this.strokeSize),this.graphics.beginStroke(this.strokeColor),null!==e&&"undefined"!=typeof e&&this.poses.push(e),createjs.Shape.call(this,this.graphics)},ROS2D.TraceShape.prototype.addPose=function(t){var e=this.poses.length-1;if(e<0)this.poses.push(t),this.graphics.moveTo(t.position.x/this.scaleX,t.position.y/-this.scaleY);else{var i=this.poses[e].position.x,s=this.poses[e].position.y,n=t.position.x-i,r=t.position.y-s;n*n+r*r>this.minDist&&(this.graphics.lineTo(t.position.x/this.scaleX,t.position.y/-this.scaleY),this.poses.push(t))}this.maxPoses>0&&this.maxPoses<this.poses.length&&this.popFront()},ROS2D.TraceShape.prototype.popFront=function(){if(this.poses.length>0){this.poses.shift(),this.graphics.clear(),this.graphics.setStrokeStyle(this.strokeSize),this.graphics.beginStroke(this.strokeColor),this.graphics.lineTo(this.poses[0].position.x/this.scaleX,this.poses[0].position.y/-this.scaleY);for(var t=1;t<this.poses.length;++t)this.graphics.lineTo(this.poses[t].position.x/this.scaleX,this.poses[t].position.y/-this.scaleY)}},ROS2D.TraceShape.prototype.__proto__=createjs.Shape.prototype,ROS2D.PanView=function(t){t=t||{},this.rootObject=t.rootObject,this.rootObject instanceof createjs.Stage?this.stage=this.rootObject:this.stage=this.rootObject.getStage(),this.startPos=new ROSLIB.Vector3},ROS2D.PanView.prototype.startPan=function(t,e){this.startPos.x=t,this.startPos.y=e},ROS2D.PanView.prototype.pan=function(t,e){this.stage.x+=t-this.startPos.x,this.startPos.x=t,this.stage.y+=e-this.startPos.y,this.startPos.y=e},ROS2D.Viewer=function(t){t=t||{};var e=t.divID;this.width=t.width,this.height=t.height;var i=t.background||"#111111",s=document.createElement("canvas");s.width=this.width,s.height=this.height,s.style.background=i,document.getElementById(e).appendChild(s),this.scene=new createjs.Stage(s),createjs.Touch.enable(this.scene),this.scene.y=this.height,document.getElementById(e).appendChild(s),createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",this.scene)},ROS2D.Viewer.prototype.addObject=function(t){this.scene.addChild(t)},ROS2D.Viewer.prototype.scaleToDimensions=function(t,e){this.scene.x="undefined"!=typeof this.scene.x_prev_shift?this.scene.x_prev_shift:this.scene.x,this.scene.y="undefined"!=typeof this.scene.y_prev_shift?this.scene.y_prev_shift:this.scene.y,this.scene.scaleX=this.width/t,this.scene.scaleY=this.height/e},ROS2D.Viewer.prototype.shift=function(t,e){this.scene.x_prev_shift=this.scene.x,this.scene.y_prev_shift=this.scene.y,this.scene.x-=t*this.scene.scaleX,this.scene.y+=e*this.scene.scaleY},ROS2D.ZoomView=function(t){t=t||{},this.rootObject=t.rootObject,this.minScale=t.minScale||.001,this.rootObject instanceof createjs.Stage?this.stage=this.rootObject:this.stage=this.rootObject.getStage(),this.center=new ROSLIB.Vector3,this.startShift=new ROSLIB.Vector3,this.startScale=new ROSLIB.Vector3},ROS2D.ZoomView.prototype.startZoom=function(t,e){this.center.x=t,this.center.y=e,this.startShift.x=this.stage.x,this.startShift.y=this.stage.y,this.startScale.x=this.stage.scaleX,this.startScale.y=this.stage.scaleY},ROS2D.ZoomView.prototype.zoom=function(t){this.startScale.x*t<this.minScale&&(t=this.minScale/this.startScale.x),this.startScale.y*t<this.minScale&&(t=this.minScale/this.startScale.y),this.stage.scaleX=this.startScale.x*t,this.stage.scaleY=this.startScale.y*t,this.stage.x=this.startShift.x-(this.center.x-this.startShift.x)*(this.stage.scaleX/this.startScale.x-1),this.stage.y=this.startShift.y-(this.center.y-this.startShift.y)*(this.stage.scaleY/this.startScale.y-1)},function t(e,i,s){function n(a,o){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!o&&h)return h(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){var i=e[a][1][t];return n(i?i:t)},l,l.exports,t,e,i,s)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(t,e,i){!function(t){function s(){this._events={},this._conf&&n.call(this,this._conf)}function n(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._events.maxListeners=e.maxListeners!==t?e.maxListeners:l,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._events.maxListeners=l}function r(t,e){var i="(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak?(i+=" Event name: %s.",console.error(i,t,e)):console.error(i,t),console.trace&&console.trace()}function a(t){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,n.call(this,t)}function o(t,e,i,s){if(!i)return[];var n,r,a,h,c,l,u,p=[],d=e.length,f=e[s],m=e[s+1];if(s===d&&i._listeners){if("function"==typeof i._listeners)return t&&t.push(i._listeners),[i];for(n=0,r=i._listeners.length;n<r;n++)t&&t.push(i._listeners[n]);return[i]}if("*"===f||"**"===f||i[f]){if("*"===f){for(a in i)"_listeners"!==a&&i.hasOwnProperty(a)&&(p=p.concat(o(t,e,i[a],s+1)));return p}if("**"===f){u=s+1===d||s+2===d&&"*"===m,u&&i._listeners&&(p=p.concat(o(t,e,i,d)));for(a in i)"_listeners"!==a&&i.hasOwnProperty(a)&&("*"===a||"**"===a?(i[a]._listeners&&!u&&(p=p.concat(o(t,e,i[a],d))),p=p.concat(o(t,e,i[a],s))):p=a===m?p.concat(o(t,e,i[a],s+2)):p.concat(o(t,e,i[a],s)));return p}p=p.concat(o(t,e,i[f],s+1))}if(h=i["*"],h&&o(t,e,h,s+1),c=i["**"])if(s<d){c._listeners&&o(t,e,c,d);for(a in c)"_listeners"!==a&&c.hasOwnProperty(a)&&(a===m?o(t,e,c[a],s+2):a===f?o(t,e,c[a],s+1):(l={},l[a]=c[a],o(t,e,{"**":l},s+1)))}else c._listeners?o(t,e,c,d):c["*"]&&c["*"]._listeners&&o(t,e,c["*"],d);return p}function h(e,i){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var s=0,n=e.length;s+1<n;s++)if("**"===e[s]&&"**"===e[s+1])return;for(var a=this.listenerTree,o=e.shift();o!==t;){if(a[o]||(a[o]={}),a=a[o],0===e.length)return a._listeners?("function"==typeof a._listeners&&(a._listeners=[a._listeners]),a._listeners.push(i),!a._listeners.warned&&this._events.maxListeners>0&&a._listeners.length>this._events.maxListeners&&(a._listeners.warned=!0,r.call(this,a._listeners.length,o))):a._listeners=i,!0;o=e.shift()}return!0}var c=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=10;a.EventEmitter2=a,a.prototype.delimiter=".",a.prototype.setMaxListeners=function(e){e!==t&&(this._events||s.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},a.prototype.event="",a.prototype.once=function(t,e){return this.many(t,1,e),this},a.prototype.many=function(t,e,i){function s(){0===--e&&n.off(t,s),i.apply(this,arguments)}var n=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");return s._origin=i,this.on(t,s),n},a.prototype.emit=function(){this._events||s.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;var e,i,n,r,a,h=arguments.length;if(this._all&&this._all.length){if(a=this._all.slice(),h>3)for(e=new Array(h),r=0;r<h;r++)e[r]=arguments[r];for(n=0,i=a.length;n<i;n++)switch(this.event=t,h){case 1:a[n].call(this,t);break;case 2:a[n].call(this,t,arguments[1]);break;case 3:a[n].call(this,t,arguments[1],arguments[2]);break;default:a[n].apply(this,e)}}if(this.wildcard){a=[];var c="string"==typeof t?t.split(this.delimiter):t.slice();o.call(this,a,c,this.listenerTree,0)}else{if(a=this._events[t],"function"==typeof a){switch(this.event=t,h){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(e=new Array(h-1),r=1;r<h;r++)e[r-1]=arguments[r];a.apply(this,e)}return!0}a&&(a=a.slice())}if(a&&a.length){if(h>3)for(e=new Array(h-1),r=1;r<h;r++)e[r-1]=arguments[r];for(n=0,i=a.length;n<i;n++)switch(this.event=t,h){case 1:a[n].call(this);break;case 2:a[n].call(this,arguments[1]);break;case 3:a[n].call(this,arguments[1],arguments[2]);break;default:a[n].apply(this,e)}return!0}if(!this._all&&"error"===t)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},a.prototype.emitAsync=function(){this._events||s.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var e,i,n,r,a,h=[],c=arguments.length;if(this._all){if(c>3)for(e=new Array(c),r=1;r<c;r++)e[r]=arguments[r];for(n=0,i=this._all.length;n<i;n++)switch(this.event=t,c){case 1:h.push(this._all[n].call(this,t));break;case 2:h.push(this._all[n].call(this,t,arguments[1]));break;case 3:h.push(this._all[n].call(this,t,arguments[1],arguments[2]));break;default:h.push(this._all[n].apply(this,e))}}if(this.wildcard){a=[];var l="string"==typeof t?t.split(this.delimiter):t.slice();o.call(this,a,l,this.listenerTree,0)}else a=this._events[t];if("function"==typeof a)switch(this.event=t,c){case 1:h.push(a.call(this));break;case 2:h.push(a.call(this,arguments[1]));break;case 3:h.push(a.call(this,arguments[1],arguments[2]));break;default:for(e=new Array(c-1),r=1;r<c;r++)e[r-1]=arguments[r];h.push(a.apply(this,e))}else if(a&&a.length){if(c>3)for(e=new Array(c-1),r=1;r<c;r++)e[r-1]=arguments[r];for(n=0,i=a.length;n<i;n++)switch(this.event=t,c){case 1:h.push(a[n].call(this));break;case 2:h.push(a[n].call(this,arguments[1]));break;case 3:h.push(a[n].call(this,arguments[1],arguments[2]));break;default:h.push(a[n].apply(this,e))}}else if(!this._all&&"error"===t)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(h)},a.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this.emit("newListener",t,e),this.wildcard?(h.call(this,t,e),this):(this._events[t]?("function"==typeof this._events[t]&&(this._events[t]=[this._events[t]]),this._events[t].push(e),!this._events[t].warned&&this._events.maxListeners>0&&this._events[t].length>this._events.maxListeners&&(this._events[t].warned=!0,r.call(this,this._events[t].length,t))):this._events[t]=e,this)},a.prototype.onAny=function(t){if("function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(t),this},a.prototype.addListener=a.prototype.on,a.prototype.off=function(e,i){function s(e){if(e!==t){var i=Object.keys(e);for(var n in i){var r=i[n],a=e[r];a instanceof Function||"object"!=typeof a||null===a||(Object.keys(a).length>0&&s(e[r]),0===Object.keys(a).length&&delete e[r])}}}if("function"!=typeof i)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var a="string"==typeof e?e.split(this.delimiter):e.slice();r=o.call(this,null,a,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var h=0;h<r.length;h++){var l=r[h];if(n=l._listeners,c(n)){for(var u=-1,p=0,d=n.length;p<d;p++)if(n[p]===i||n[p].listener&&n[p].listener===i||n[p]._origin&&n[p]._origin===i){u=p;break}if(u<0)continue;return this.wildcard?l._listeners.splice(u,1):this._events[e].splice(u,1),0===n.length&&(this.wildcard?delete l._listeners:delete this._events[e]),this.emit("removeListener",e,i),this}(n===i||n.listener&&n.listener===i||n._origin&&n._origin===i)&&(this.wildcard?delete l._listeners:delete this._events[e],this.emit("removeListener",e,i))}return s(this.listenerTree),this},a.prototype.offAny=function(t){var e,i=0,s=0;if(t&&this._all&&this._all.length>0){for(e=this._all,i=0,s=e.length;i<s;i++)if(t===e[i])return e.splice(i,1),this.emit("removeListenerAny",t),this}else{for(e=this._all,i=0,s=e.length;i<s;i++)this.emit("removeListenerAny",e[i]);this._all=[]}return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||s.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),i=o.call(this,null,e,this.listenerTree,0),n=0;n<i.length;n++){var r=i[n];r._listeners=null}else this._events&&(this._events[t]=null);return this;
},a.prototype.listeners=function(t){if(this.wildcard){var e=[],i="string"==typeof t?t.split(this.delimiter):t.slice();return o.call(this,e,i,this.listenerTree,0),e}return this._events||s.call(this),this._events[t]||(this._events[t]=[]),c(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},a.prototype.listenerCount=function(t){return this.listeners(t).length},a.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof i?e.exports=a:window.EventEmitter2=a}()},{}],2:[function(t,e,i){"use strict";function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function n(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var s=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==s.join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}var r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=n()?Object.assign:function(t,e){for(var i,n,o=s(t),h=1;h<arguments.length;h++){i=Object(arguments[h]);for(var c in i)r.call(i,c)&&(o[c]=i[c]);if(Object.getOwnPropertySymbols){n=Object.getOwnPropertySymbols(i);for(var l=0;l<n.length;l++)a.call(i,n[l])&&(o[n[l]]=i[n[l]])}}return o}},{}],3:[function(t,e,i){var s=this.ROSLIB||{REVISION:"0.19.0-SNAPSHOT"},n=t("object-assign");n(s,t("./core")),n(s,t("./actionlib")),n(s,t("./math")),n(s,t("./tf")),n(s,t("./urdf")),e.exports=s},{"./actionlib":9,"./core":18,"./math":23,"./tf":26,"./urdf":38,"object-assign":2}],4:[function(t,e,i){(function(e){e.ROSLIB=t("./RosLib")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./RosLib":3}],5:[function(t,e,i){function s(t){var e=this;t=t||{},this.ros=t.ros,this.serverName=t.serverName,this.actionName=t.actionName,this.timeout=t.timeout,this.omitFeedback=t.omitFeedback,this.omitStatus=t.omitStatus,this.omitResult=t.omitResult,this.goals={};var i=!1,s=new n({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),r=new n({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),a=new n({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});this.goalTopic=new n({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new n({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||r.subscribe(function(t){i=!0,t.status_list.forEach(function(t){var i=e.goals[t.goal_id.id];i&&i.emit("status",t)})}),this.omitFeedback||s.subscribe(function(t){var i=e.goals[t.status.goal_id.id];i&&(i.emit("status",t.status),i.emit("feedback",t.feedback))}),this.omitResult||a.subscribe(function(t){var i=e.goals[t.status.goal_id.id];i&&(i.emit("status",t.status),i.emit("result",t.result))}),this.timeout&&setTimeout(function(){i||e.emit("timeout")},this.timeout)}var n=t("../core/Topic"),r=t("../core/Message"),a=t("eventemitter2").EventEmitter2;s.prototype.__proto__=a.prototype,s.prototype.cancel=function(){var t=new r;this.cancelTopic.publish(t)},e.exports=s},{"../core/Message":10,"../core/Topic":17,eventemitter2:1}],6:[function(t,e,i){function s(t){var e=this;t=t||{},this.ros=t.ros,this.serverName=t.serverName,this.actionName=t.actionName,this.timeout=t.timeout,this.omitFeedback=t.omitFeedback,this.omitStatus=t.omitStatus,this.omitResult=t.omitResult;var i=new n({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),s=new n({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),r=new n({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),a=new n({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});i.subscribe(function(t){e.emit("goal",t)}),r.subscribe(function(t){t.status_list.forEach(function(t){e.emit("status",t)})}),s.subscribe(function(t){e.emit("status",t.status),e.emit("feedback",t.feedback)}),a.subscribe(function(t){e.emit("status",t.status),e.emit("result",t.result)})}var n=t("../core/Topic"),r=(t("../core/Message"),t("eventemitter2").EventEmitter2);s.prototype.__proto__=r.prototype,e.exports=s},{"../core/Message":10,"../core/Topic":17,eventemitter2:1}],7:[function(t,e,i){function s(t){var e=this;this.actionClient=t.actionClient,this.goalMessage=t.goalMessage,this.isFinished=!1;var i=new Date;this.goalID="goal_"+Math.random()+"_"+i.getTime(),this.goalMessage=new n({goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:this.goalMessage}),this.on("status",function(t){e.status=t}),this.on("result",function(t){e.isFinished=!0,e.result=t}),this.on("feedback",function(t){e.feedback=t}),this.actionClient.goals[this.goalID]=this}var n=t("../core/Message"),r=t("eventemitter2").EventEmitter2;s.prototype.__proto__=r.prototype,s.prototype.send=function(t){var e=this;e.actionClient.goalTopic.publish(e.goalMessage),t&&setTimeout(function(){e.isFinished||e.emit("timeout")},t)},s.prototype.cancel=function(){var t=new n({id:this.goalID});this.actionClient.cancelTopic.publish(t)},e.exports=s},{"../core/Message":10,eventemitter2:1}],8:[function(t,e,i){function s(t){var e=this;t=t||{},this.ros=t.ros,this.serverName=t.serverName,this.actionName=t.actionName,this.feedbackPublisher=new n({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise();var i=new n({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"});i.advertise(),this.resultPublisher=new n({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise();var s=new n({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),a=new n({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage=new r({header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]}),this.currentGoal=null,this.nextGoal=null,s.subscribe(function(t){e.currentGoal?(e.nextGoal=t,e.emit("cancel")):(e.statusMessage.status_list=[{goal_id:t.goal_id,status:1}],e.currentGoal=t,e.emit("goal",t.goal))});var o=function(t,e){return!(t.secs>e.secs)&&(t.secs<e.secs||t.nsecs<e.nsecs)};a.subscribe(function(t){0===t.stamp.secs&&0===t.stamp.secs&&""===t.id?(e.nextGoal=null,e.currentGoal&&e.emit("cancel")):(e.currentGoal&&t.id===e.currentGoal.goal_id.id?e.emit("cancel"):e.nextGoal&&t.id===e.nextGoal.goal_id.id&&(e.nextGoal=null),e.nextGoal&&o(e.nextGoal.goal_id.stamp,t.stamp)&&(e.nextGoal=null),e.currentGoal&&o(e.currentGoal.goal_id.stamp,t.stamp)&&e.emit("cancel"))});setInterval(function(){var t=new Date,s=Math.floor(t.getTime()/1e3),n=Math.round(1e9*(t.getTime()/1e3-s));e.statusMessage.header.stamp.secs=s,e.statusMessage.header.stamp.nsecs=n,i.publish(e.statusMessage)},500)}var n=t("../core/Topic"),r=t("../core/Message"),a=t("eventemitter2").EventEmitter2;s.prototype.__proto__=a.prototype,s.prototype.setSucceeded=function(t){var e=new r({status:{goal_id:this.currentGoal.goal_id,status:3},result:t});this.resultPublisher.publish(e),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},s.prototype.sendFeedback=function(t){var e=new r({status:{goal_id:this.currentGoal.goal_id,status:1},feedback:t});this.feedbackPublisher.publish(e)},s.prototype.setPreempted=function(){this.statusMessage.status_list=[];var t=new r({status:{goal_id:this.currentGoal.goal_id,status:2}});this.resultPublisher.publish(t),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},e.exports=s},{"../core/Message":10,"../core/Topic":17,eventemitter2:1}],9:[function(t,e,i){var s=t("../core/Ros"),n=t("../mixin"),r=e.exports={ActionClient:t("./ActionClient"),ActionListener:t("./ActionListener"),Goal:t("./Goal"),SimpleActionServer:t("./SimpleActionServer")};n(s,["ActionClient","SimpleActionServer"],r)},{"../core/Ros":12,"../mixin":24,"./ActionClient":5,"./ActionListener":6,"./Goal":7,"./SimpleActionServer":8}],10:[function(t,e,i){function s(t){n(this,t)}var n=t("object-assign");e.exports=s},{"object-assign":2}],11:[function(t,e,i){function s(t){t=t||{},this.ros=t.ros,this.name=t.name}var n=t("./Service"),r=t("./ServiceRequest");s.prototype.get=function(t){var e=new n({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),i=new r({name:this.name});e.callService(i,function(e){var i=JSON.parse(e.value);t(i)})},s.prototype.set=function(t,e){var i=new n({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),s=new r({name:this.name,value:JSON.stringify(t)});i.callService(s,e)},s.prototype.delete=function(t){var e=new n({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),i=new r({name:this.name});e.callService(i,t)},e.exports=s},{"./Service":13,"./ServiceRequest":14}],12:[function(t,e,i){function s(t){t=t||{},this.socket=null,this.idCounter=0,this.isConnected=!1,this.transportLibrary=t.transportLibrary||"websocket",this.transportOptions=t.transportOptions||{},"undefined"==typeof t.groovyCompatibility?this.groovyCompatibility=!0:this.groovyCompatibility=t.groovyCompatibility,this.setMaxListeners(0),t.url&&this.connect(t.url)}var n=(t("ws"),t("./SocketAdapter.js")),r=t("./Service"),a=t("./ServiceRequest"),o=t("object-assign"),h=t("eventemitter2").EventEmitter2;s.prototype.__proto__=h.prototype,s.prototype.connect=function(t){"socket.io"===this.transportLibrary?(this.socket=o(io(t,{"force new connection":!0}),n(this)),this.socket.on("connect",this.socket.onopen),this.socket.on("data",this.socket.onmessage),this.socket.on("close",this.socket.onclose),this.socket.on("error",this.socket.onerror)):"RTCPeerConnection"===this.transportLibrary.constructor.name?this.socket=o(this.transportLibrary.createDataChannel(t,this.transportOptions),n(this)):this.socket=o(new ReconnectingWebSocket(t),n(this))},s.prototype.close=function(){this.socket&&this.socket.close()},s.prototype.authenticate=function(t,e,i,s,n,r,a){var o={op:"auth",mac:t,client:e,dest:i,rand:s,t:n,level:r,end:a};this.callOnConnection(o)},s.prototype.callOnConnection=function(t){var e=this,i=JSON.stringify(t),s=null;s="socket.io"===this.transportLibrary?function(t){e.socket.emit("operation",t)}:function(t){e.socket.send(t)},this.isConnected?s(i):e.once("connection",function(){s(i)})},s.prototype.getTopics=function(t,e){var i=new r({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),s=new a;"function"==typeof e?i.callService(s,function(e){t(e)},function(t){e(t)}):i.callService(s,function(e){t(e)})},s.prototype.getTopicsForType=function(t,e,i){var s=new r({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),n=new a({type:t});"function"==typeof i?s.callService(n,function(t){e(t.topics)},function(t){i(t)}):s.callService(n,function(t){e(t.topics)})},s.prototype.getServices=function(t,e){var i=new r({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),s=new a;"function"==typeof e?i.callService(s,function(e){t(e.services)},function(t){e(t)}):i.callService(s,function(e){t(e.services)})},s.prototype.getServicesForType=function(t,e,i){var s=new r({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),n=new a({type:t});"function"==typeof i?s.callService(n,function(t){e(t.services)},function(t){i(t)}):s.callService(n,function(t){e(t.services)})},s.prototype.getServiceRequestDetails=function(t,e,i){var s=new r({ros:this,name:"/rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}),n=new a({type:t});"function"==typeof i?s.callService(n,function(t){e(t)},function(t){i(t)}):s.callService(n,function(t){e(t)})},s.prototype.getServiceResponseDetails=function(t,e,i){var s=new r({ros:this,name:"/rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}),n=new a({type:t});"function"==typeof i?s.callService(n,function(t){e(t)},function(t){i(t)}):s.callService(n,function(t){e(t)})},s.prototype.getNodes=function(t,e){var i=new r({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),s=new a;"function"==typeof e?i.callService(s,function(e){t(e.nodes)},function(t){e(t)}):i.callService(s,function(e){t(e.nodes)})},s.prototype.getNodeDetails=function(t,e,i){var s=new r({ros:this,name:"/rosapi/node_details",serviceType:"rosapi/NodeDetails"}),n=new a({node:t});"function"==typeof i?s.callService(n,function(t){e(t.subscribing,t.publishing,t.services)},function(t){i(t)}):s.callService(n,function(t){e(t)})},s.prototype.getParams=function(t,e){var i=new r({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),s=new a;"function"==typeof e?i.callService(s,function(e){t(e.names)},function(t){e(t)}):i.callService(s,function(e){t(e.names)})},s.prototype.getTopicType=function(t,e,i){var s=new r({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),n=new a({topic:t});"function"==typeof i?s.callService(n,function(t){e(t.type)},function(t){i(t)}):s.callService(n,function(t){e(t.type)})},s.prototype.getServiceType=function(t,e,i){var s=new r({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),n=new a({service:t});"function"==typeof i?s.callService(n,function(t){e(t.type)},function(t){i(t)}):s.callService(n,function(t){e(t.type)})},s.prototype.getMessageDetails=function(t,e,i){var s=new r({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),n=new a({type:t});"function"==typeof i?s.callService(n,function(t){e(t.typedefs)},function(t){i(t)}):s.callService(n,function(t){e(t.typedefs)})},s.prototype.decodeTypeDefs=function(t){var e=this,i=function(t,s){for(var n={},r=0;r<t.fieldnames.length;r++){var a=t.fieldarraylen[r],o=t.fieldnames[r],h=t.fieldtypes[r];if(h.indexOf("/")===-1)a===-1?n[o]=h:n[o]=[h];else{for(var c=!1,l=0;l<s.length;l++)if(s[l].type.toString()===h.toString()){c=s[l];break}if(c){var u=i(c,s);a===-1||(n[o]=[u])}else e.emit("error","Cannot find "+h+" in decodeTypeDefs")}}return n};return i(t[0],t)},e.exports=s},{"./Service":13,"./ServiceRequest":14,"./SocketAdapter.js":16,eventemitter2:1,"object-assign":2,ws:39}],13:[function(t,e,i){function s(t){t=t||{},this.ros=t.ros,this.name=t.name,this.serviceType=t.serviceType,this.isAdvertised=!1,this._serviceCallback=null}var n=t("./ServiceResponse"),r=(t("./ServiceRequest"),t("eventemitter2").EventEmitter2);s.prototype.__proto__=r.prototype,s.prototype.callService=function(t,e,i){if(!this.isAdvertised){var s="call_service:"+this.name+":"+ ++this.ros.idCounter;(e||i)&&this.ros.once(s,function(t){void 0!==t.result&&t.result===!1?"function"==typeof i&&i(t.values):"function"==typeof e&&e(new n(t.values))});var r={op:"call_service",id:s,service:this.name,args:t};this.ros.callOnConnection(r)}},s.prototype.advertise=function(t){this.isAdvertised||"function"!=typeof t||(this._serviceCallback=t,this.ros.on(this.name,this._serviceResponse.bind(this)),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0)},s.prototype.unadvertise=function(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this.isAdvertised=!1)},s.prototype._serviceResponse=function(t){var e={},i=this._serviceCallback(t.args,e),s={op:"service_response",service:this.name,values:new n(e),result:i};t.id&&(s.id=t.id),this.ros.callOnConnection(s)},e.exports=s},{"./ServiceRequest":14,"./ServiceResponse":15,eventemitter2:1}],14:[function(t,e,i){function s(t){n(this,t)}var n=t("object-assign");e.exports=s},{"object-assign":2}],15:[function(t,e,i){function s(t){n(this,t)}var n=t("object-assign");e.exports=s},{"object-assign":2}],16:[function(t,e,i){"use strict";function s(t){function e(e){"publish"===e.op?t.emit(e.topic,e.msg):"service_response"===e.op?t.emit(e.id,e):"call_service"===e.op&&t.emit(e.service,e)}function i(t,e){"png"===t.op?n(t.data,e):e(t)}function s(t,e){if(!r)throw"Cannot process BSON encoded message without BSON header.";var i=new FileReader;i.onload=function(){var t=new Uint8Array(this.result),i=r.deserialize(t);e(i)},i.readAsArrayBuffer(t)}return{onopen:function(e){t.isConnected=!0,t.emit("connection",e)},onclose:function(e){t.isConnected=!1,t.emit("close",e)},onerror:function(e){t.emit("error",e)},onmessage:function(t){if("undefined"!=typeof Blob&&t.data instanceof Blob)s(t.data,function(t){i(t,e)});else{var n=JSON.parse("string"==typeof t?t:t.data);i(n,e)}}}}var n=t("../util/decompressPng"),r=(t("ws"),null);"undefined"!=typeof bson&&(r=bson().BSON),e.exports=s},{"../util/decompressPng":41,ws:39}],17:[function(t,e,i){function s(t){t=t||{},this.ros=t.ros,this.name=t.name,this.messageType=t.messageType,this.isAdvertised=!1,this.compression=t.compression||"none",this.throttle_rate=t.throttle_rate||0,this.latch=t.latch||!1,this.queue_size=t.queue_size||100,this.queue_length=t.queue_length||0,this.compression&&"png"!==this.compression&&"none"!==this.compression&&this.emit("warning",this.compression+" compression is not supported. No compression will be used."),this.throttle_rate<0&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0);var e=this;this._messageCallback=function(t){e.emit("message",new r(t))}}var n=t("eventemitter2").EventEmitter2,r=t("./Message");s.prototype.__proto__=n.prototype,s.prototype.subscribe=function(t){"function"==typeof t&&this.on("message",t),this.subscribeId||(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+ ++this.ros.idCounter,this.ros.callOnConnection({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))},s.prototype.unsubscribe=function(t){t&&(this.off("message",t),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this._messageCallback),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)},s.prototype.advertise=function(){this.isAdvertised||(this.advertiseId="advertise:"+this.name+":"+ ++this.ros.idCounter,this.ros.callOnConnection({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0)},s.prototype.unadvertise=function(){this.isAdvertised&&(this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)},s.prototype.publish=function(t){this.isAdvertised||this.advertise(),this.ros.idCounter++;var e={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:t,latch:this.latch};this.ros.callOnConnection(e)},e.exports=s},{"./Message":10,eventemitter2:1}],18:[function(t,e,i){var s=t("../mixin"),n=e.exports={Ros:t("./Ros"),Topic:t("./Topic"),Message:t("./Message"),Param:t("./Param"),Service:t("./Service"),ServiceRequest:t("./ServiceRequest"),ServiceResponse:t("./ServiceResponse")};s(n.Ros,["Param","Service","Topic"],n)},{"../mixin":24,"./Message":10,"./Param":11,"./Ros":12,"./Service":13,"./ServiceRequest":14,"./ServiceResponse":15,"./Topic":17}],19:[function(t,e,i){function s(t){t=t||{},this.position=new n(t.position),this.orientation=new r(t.orientation)}var n=t("./Vector3"),r=t("./Quaternion");s.prototype.applyTransform=function(t){this.position.multiplyQuaternion(t.rotation),this.position.add(t.translation);var e=t.rotation.clone();e.multiply(this.orientation),this.orientation=e},s.prototype.clone=function(){return new s(this)},e.exports=s},{"./Quaternion":20,"./Vector3":22}],20:[function(t,e,i){function s(t){t=t||{},this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w="number"==typeof t.w?t.w:1}s.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},s.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},s.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t)},s.prototype.invert=function(){this.conjugate(),this.normalize()},s.prototype.multiply=function(t){var e=this.x*t.w+this.y*t.z-this.z*t.y+this.w*t.x,i=-this.x*t.z+this.y*t.w+this.z*t.x+this.w*t.y,s=this.x*t.y-this.y*t.x+this.z*t.w+this.w*t.z,n=-this.x*t.x-this.y*t.y-this.z*t.z+this.w*t.w;this.x=e,this.y=i,this.z=s,this.w=n},s.prototype.clone=function(){return new s(this)},e.exports=s},{}],21:[function(t,e,i){function s(t){t=t||{},this.translation=new n(t.translation),this.rotation=new r(t.rotation)}var n=t("./Vector3"),r=t("./Quaternion");s.prototype.clone=function(){return new s(this)},e.exports=s},{"./Quaternion":20,"./Vector3":22}],22:[function(t,e,i){function s(t){t=t||{},this.x=t.x||0,this.y=t.y||0,this.z=t.z||0}s.prototype.add=function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},s.prototype.subtract=function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},s.prototype.multiplyQuaternion=function(t){var e=t.w*this.x+t.y*this.z-t.z*this.y,i=t.w*this.y+t.z*this.x-t.x*this.z,s=t.w*this.z+t.x*this.y-t.y*this.x,n=-t.x*this.x-t.y*this.y-t.z*this.z;this.x=e*t.w+n*-t.x+i*-t.z-s*-t.y,this.y=i*t.w+n*-t.y+s*-t.x-e*-t.z,this.z=s*t.w+n*-t.z+e*-t.y-i*-t.x},s.prototype.clone=function(){return new s(this)},e.exports=s},{}],23:[function(t,e,i){e.exports={Pose:t("./Pose"),Quaternion:t("./Quaternion"),Transform:t("./Transform"),Vector3:t("./Vector3")}},{"./Pose":19,"./Quaternion":20,"./Transform":21,"./Vector3":22}],24:[function(t,e,i){e.exports=function(t,e,i){e.forEach(function(e){var s=i[e];t.prototype[e]=function(t){return t.ros=this,new s(t)}})}},{}],25:[function(t,e,i){function s(t){t=t||{},this.ros=t.ros,this.fixedFrame=t.fixedFrame||"/base_link",this.angularThres=t.angularThres||2,this.transThres=t.transThres||.01,this.rate=t.rate||10,this.updateDelay=t.updateDelay||50;var e=t.topicTimeout||2,i=Math.floor(e),s=Math.floor(1e9*(e-i));this.topicTimeout={secs:i,nsecs:s},this.serverName=t.serverName||"/tf2_web_republisher",this.repubServiceName=t.repubServiceName||"/republish_tfs",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this.actionClient=this.ros.ActionClient({serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=this.ros.Service({name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}var n=(t("../actionlib/ActionClient"),t("../actionlib/Goal")),r=(t("../core/Service.js"),t("../core/ServiceRequest.js")),a=t("../math/Transform");s.prototype.processTFArray=function(t){t.transforms.forEach(function(t){var e=t.child_frame_id;"/"===e[0]&&(e=e.substring(1));var i=this.frameInfos[e];i&&(i.transform=new a({translation:t.transform.translation,rotation:t.transform.rotation}),i.cbs.forEach(function(t){t(i.transform)}))},this)},s.prototype.updateGoal=function(){var t={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};if(this.ros.groovyCompatibility)this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new n({actionClient:this.actionClient,goalMessage:t}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send();else{t.timeout=this.topicTimeout;var e=new r(t);this.serviceClient.callService(e,this.processResponse.bind(this))}this.republisherUpdateRequested=!1},s.prototype.processResponse=function(t){this.currentTopic&&this.currentTopic.unsubscribe(),this.currentTopic=this.ros.Topic({name:t.topic_name,messageType:"tf2_web_republisher/TFArray"}),this.currentTopic.subscribe(this.processTFArray.bind(this))},s.prototype.subscribe=function(t,e){"/"===t[0]&&(t=t.substring(1)),this.frameInfos[t]?this.frameInfos[t].transform&&e(this.frameInfos[t].transform):(this.frameInfos[t]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[t].cbs.push(e)},s.prototype.unsubscribe=function(t,e){"/"===t[0]&&(t=t.substring(1));for(var i=this.frameInfos[t],s=i&&i.cbs||[],n=s.length;n--;)s[n]===e&&s.splice(n,1);e&&0!==s.length||delete this.frameInfos[t]},e.exports=s},{"../actionlib/ActionClient":5,"../actionlib/Goal":7,"../core/Service.js":13,"../core/ServiceRequest.js":14,"../math/Transform":21}],26:[function(t,e,i){var s=t("../core/Ros"),n=t("../mixin"),r=e.exports={TFClient:t("./TFClient")};n(s,["TFClient"],r)},{"../core/Ros":12,"../mixin":24,"./TFClient":25}],27:[function(t,e,i){function s(t){this.dimension=null,this.type=r.URDF_BOX;var e=t.xml.getAttribute("size").split(" ");this.dimension=new n({x:parseFloat(e[0]),y:parseFloat(e[1]),z:parseFloat(e[2])})}var n=t("../math/Vector3"),r=t("./UrdfTypes");e.exports=s},{"../math/Vector3":22,"./UrdfTypes":36}],28:[function(t,e,i){function s(t){var e=t.xml.getAttribute("rgba").split(" ");this.r=parseFloat(e[0]),this.g=parseFloat(e[1]),this.b=parseFloat(e[2]),this.a=parseFloat(e[3])}e.exports=s},{}],29:[function(t,e,i){function s(t){this.type=n.URDF_CYLINDER,this.length=parseFloat(t.xml.getAttribute("length")),this.radius=parseFloat(t.xml.getAttribute("radius"))}var n=t("./UrdfTypes");e.exports=s},{"./UrdfTypes":36}],30:[function(t,e,i){function s(t){this.name=t.xml.getAttribute("name"),this.type=t.xml.getAttribute("type");var e=t.xml.getElementsByTagName("limit");e.length>0&&(this.minval=parseFloat(e[0].getAttribute("lower")),this.maxval=parseFloat(e[0].getAttribute("upper")))}e.exports=s},{}],31:[function(t,e,i){function s(t){this.name=t.xml.getAttribute("name"),this.visuals=[];for(var e=t.xml.getElementsByTagName("visual"),i=0;i<e.length;i++)this.visuals.push(new n({xml:e[i]}))}var n=t("./UrdfVisual");e.exports=s},{"./UrdfVisual":37}],32:[function(t,e,i){function s(t){this.textureFilename=null,this.color=null,this.name=t.xml.getAttribute("name");var e=t.xml.getElementsByTagName("texture");e.length>0&&(this.textureFilename=e[0].getAttribute("filename"));var i=t.xml.getElementsByTagName("color");i.length>0&&(this.color=new n({xml:i[0]}))}var n=t("./UrdfColor");s.prototype.isLink=function(){return null===this.color&&null===this.textureFilename};var r=t("object-assign");s.prototype.assign=function(t){return r(this,t)},e.exports=s},{"./UrdfColor":28,"object-assign":2}],33:[function(t,e,i){function s(t){this.scale=null,this.type=r.URDF_MESH,this.filename=t.xml.getAttribute("filename");var e=t.xml.getAttribute("scale");if(e){var i=e.split(" ");this.scale=new n({x:parseFloat(i[0]),y:parseFloat(i[1]),z:parseFloat(i[2])})}}var n=t("../math/Vector3"),r=t("./UrdfTypes");e.exports=s},{"../math/Vector3":22,"./UrdfTypes":36}],34:[function(t,e,i){function s(t){t=t||{};var e=t.xml,i=t.string;if(this.materials={},this.links={},this.joints={},i){var s=new o;e=s.parseFromString(i,"text/xml")}var h=e.documentElement;this.name=h.getAttribute("name");for(var c=h.childNodes,l=0;l<c.length;l++){var u=c[l];if("material"===u.tagName){var p=new n({xml:u});void 0!==this.materials[p.name]?this.materials[p.name].isLink()?this.materials[p.name].assign(p):console.warn("Material "+p.name+"is not unique."):this.materials[p.name]=p}else if("link"===u.tagName){var d=new r({xml:u});if(void 0!==this.links[d.name])console.warn("Link "+d.name+" is not unique.");else{for(var f=0;f<d.visuals.length;f++){var m=d.visuals[f].material;null!==m&&(void 0!==this.materials[m.name]?d.visuals[f].material=this.materials[m.name]:this.materials[m.name]=m)}this.links[d.name]=d}}else if("joint"===u.tagName){var v=new a({xml:u});this.joints[v.name]=v}}}var n=t("./UrdfMaterial"),r=t("./UrdfLink"),a=t("./UrdfJoint"),o=t("xmldom").DOMParser;e.exports=s},{"./UrdfJoint":30,"./UrdfLink":31,"./UrdfMaterial":32,xmldom:42}],35:[function(t,e,i){function s(t){this.type=n.URDF_SPHERE,this.radius=parseFloat(t.xml.getAttribute("radius"))}var n=t("./UrdfTypes");e.exports=s},{"./UrdfTypes":36}],36:[function(t,e,i){e.exports={URDF_SPHERE:0,URDF_BOX:1,URDF_CYLINDER:2,URDF_MESH:3}},{}],37:[function(t,e,i){function s(t){var e=t.xml;this.origin=null,this.geometry=null,this.material=null;var i=e.getElementsByTagName("origin");if(0===i.length)this.origin=new n;else{var s=i[0].getAttribute("xyz"),p=new r;s&&(s=s.split(" "),p=new r({x:parseFloat(s[0]),y:parseFloat(s[1]),z:parseFloat(s[2])}));var d=i[0].getAttribute("rpy"),f=new a;if(d){d=d.split(" ");var m=parseFloat(d[0]),v=parseFloat(d[1]),g=parseFloat(d[2]),_=m/2,y=v/2,w=g/2,b=Math.sin(_)*Math.cos(y)*Math.cos(w)-Math.cos(_)*Math.sin(y)*Math.sin(w),S=Math.cos(_)*Math.sin(y)*Math.cos(w)+Math.sin(_)*Math.cos(y)*Math.sin(w),x=Math.cos(_)*Math.cos(y)*Math.sin(w)-Math.sin(_)*Math.sin(y)*Math.cos(w),T=Math.cos(_)*Math.cos(y)*Math.cos(w)+Math.sin(_)*Math.sin(y)*Math.sin(w);f=new a({x:b,y:S,z:x,w:T}),f.normalize()}this.origin=new n({position:p,orientation:f})}var C=e.getElementsByTagName("geometry");if(C.length>0){for(var O=C[0],E=null,j=0;j<O.childNodes.length;j++){var k=O.childNodes[j];if(1===k.nodeType){E=k;break}}var M=E.nodeName;"sphere"===M?this.geometry=new u({xml:E}):"box"===M?this.geometry=new h({xml:E}):"cylinder"===M?this.geometry=new o({xml:E}):"mesh"===M?this.geometry=new l({xml:E}):console.warn("Unknown geometry type "+M)}var I=e.getElementsByTagName("material");I.length>0&&(this.material=new c({xml:I[0]}))}var n=t("../math/Pose"),r=t("../math/Vector3"),a=t("../math/Quaternion"),o=t("./UrdfCylinder"),h=t("./UrdfBox"),c=t("./UrdfMaterial"),l=t("./UrdfMesh"),u=t("./UrdfSphere");e.exports=s},{"../math/Pose":19,"../math/Quaternion":20,"../math/Vector3":22,"./UrdfBox":27,"./UrdfCylinder":29,"./UrdfMaterial":32,"./UrdfMesh":33,"./UrdfSphere":35}],38:[function(t,e,i){e.exports=t("object-assign")({UrdfBox:t("./UrdfBox"),UrdfColor:t("./UrdfColor"),UrdfCylinder:t("./UrdfCylinder"),UrdfLink:t("./UrdfLink"),UrdfMaterial:t("./UrdfMaterial"),UrdfMesh:t("./UrdfMesh"),UrdfModel:t("./UrdfModel"),UrdfSphere:t("./UrdfSphere"),UrdfVisual:t("./UrdfVisual")},t("./UrdfTypes"))},{"./UrdfBox":27,"./UrdfColor":28,"./UrdfCylinder":29,"./UrdfLink":31,"./UrdfMaterial":32,"./UrdfMesh":33,"./UrdfModel":34,"./UrdfSphere":35,"./UrdfTypes":36,"./UrdfVisual":37,"object-assign":2}],39:[function(t,e,i){(function(t){e.exports=t.WebSocket}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(t,e,i){e.exports=function(){return document.createElement("canvas")}},{}],41:[function(t,e,i){(function(i){"use strict";function s(t,e){var i=new r;i.onload=function(){var t=new n,s=t.getContext("2d");t.width=i.width,t.height=i.height,s.imageSmoothingEnabled=!1,s.webkitImageSmoothingEnabled=!1,s.mozImageSmoothingEnabled=!1,s.drawImage(i,0,0);for(var r=s.getImageData(0,0,i.width,i.height).data,a="",o=0;o<r.length;o+=4)a+=String.fromCharCode(r[o],r[o+1],r[o+2]);e(JSON.parse(a))},i.src="data:image/png;base64,"+t}var n=t("canvas"),r=n.Image||i.Image;e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{canvas:40}],42:[function(t,e,i){(function(t){i.DOMImplementation=t.DOMImplementation,i.XMLSerializer=t.XMLSerializer,i.DOMParser=t.DOMParser}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[4]);